<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">


  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="MySql," />





  <link rel="alternate" href="/atom.xml" title="Hao-Perfect's Blog" type="application/atom+xml" />






<meta name="description" content="概述学习记录use xx; 进入某个数据库 select database();  查看当前所在的数据库 select version; 查看版本 MySQL的常见命令 查看当前所有的数据库  show databases；  打开指定的库  use 库名;  查看当前库的所有表  show tables;  查看其他库的所有表  show tables from 库名;  创建表  create">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习记录">
<meta property="og:url" content="http://hao-perfect.github.io/2020/04/12/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="Hao-Perfect&#39;s Blog">
<meta property="og:description" content="概述学习记录use xx; 进入某个数据库 select database();  查看当前所在的数据库 select version; 查看版本 MySQL的常见命令 查看当前所有的数据库  show databases；  打开指定的库  use 库名;  查看当前库的所有表  show tables;  查看其他库的所有表  show tables from 库名;  创建表  create">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/20200311052216.png/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1586647591.jpg/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1586901150(1).jpg/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/202004201587375934(1).jpg/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/202004201587376791(1).jpg/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/202004201587377862(1).jpg/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/152020042087380720(1).jpg/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1587401268(1).jpg/Hao">
<meta property="og:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1587401289(1).jpg/Hao">
<meta property="article:published_time" content="2020-04-11T23:46:08.000Z">
<meta property="article:modified_time" content="2020-04-20T16:50:11.519Z">
<meta property="article:author" content="Hao_Perfect">
<meta property="article:tag" content="MySql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/20200311052216.png/Hao">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://Hao-Perfect.github.io/2020/04/12/MySQL学习记录/"/>





  <title>MySQL学习记录 | Hao-Perfect's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?643981913ae298999b81b57951f0d16f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/Hao-Perfect" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hao-Perfect's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">欢迎来到小豪的空间</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Hao_Perfect
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://hao-perfect.github.io/2020/04/12/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" title="MySQL学习记录">http://hao-perfect.github.io/2020/04/12/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    
    </br />
    </br />
    
    <link itemprop="mainEntityOfPage" href="http://Hao-Perfect.github.io/2020/04/12/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hao_Perfect">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hao-Perfect's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MySQL学习记录</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-04-12T07:46:08+08:00">
                2020-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySql/" itemprop="url" rel="index">
                    <span itemprop="name">MySql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2020/04/12/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" class="leancloud_visitors" data-flag-title="MySQL学习记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">热度&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span><span>℃</span>
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  15.4k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  67 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h1 id="学习记录"><a href="#学习记录" class="headerlink" title="学习记录"></a>学习记录</h1><p>use xx; 进入某个数据库</p>
<p>select database();  查看当前所在的数据库</p>
<p>select version; 查看版本</p>
<h3 id="MySQL的常见命令"><a href="#MySQL的常见命令" class="headerlink" title="MySQL的常见命令"></a>MySQL的常见命令</h3><ol>
<li><p>查看当前所有的数据库</p>
<p> show databases；</p>
</li>
<li><p>打开指定的库</p>
<p> use 库名;</p>
</li>
<li><p>查看当前库的所有表</p>
<p> show tables;</p>
</li>
<li><p>查看其他库的所有表</p>
<p> show tables from 库名;</p>
</li>
<li><p>创建表</p>
<p> create table 表名(</p>
<p> 列名 列类型；</p>
<p> 列名 列类型；</p>
<p> ……</p>
<p> )</p>
</li>
<li><p>查看表结构</p>
<p> desc 表名;</p>
</li>
<li><p>查看服务器的版本</p>
<p> 方式一： 登录到Mysql服务端</p>
<p> select version();</p>
<p> 方式二： 没有登录到Mysql服务端</p>
<p> mysql –version 或 mysql –V</p>
</li>
</ol>
<h3 id="MySQL的语法规范"><a href="#MySQL的语法规范" class="headerlink" title="MySQL的语法规范"></a>MySQL的语法规范</h3><ol>
<li><p>不区分大小写，但是建议关键字大写，表名、列名小写</p>
</li>
<li><p>每条命令最好用分号结尾</p>
</li>
<li><p>每条命令根据需要，可以进行缩进活或者换行</p>
</li>
<li><p>注释  </p>
<p> 当行注释： # 注释文字</p>
<p> 单行注释： – 注释文字</p>
<p> 多行注释： /*注释文字 */</p>
</li>
</ol>
<p>SQL语言包括：DQL语言、DML语言、DDL语言、TCL语言</p>
<h3 id="DQL语言的学习"><a href="#DQL语言的学习" class="headerlink" title="DQL语言的学习"></a>DQL语言的学习</h3><img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/20200311052216.png/Hao"/>



<h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"># 进阶1：基础查询</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">select 查询列表</span><br><span class="line">from 表名;</span><br><span class="line"></span><br><span class="line">类似于：System.out.println(打印东西);</span><br><span class="line">特点:</span><br><span class="line">1、查询列表可以是：表中的字段、常量值、表达式、函数</span><br><span class="line">2、查询的结果是一个虚拟的表格</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line"># 1.查询表中的单个字段</span><br><span class="line">SELECT last_name FROM employees;</span><br><span class="line"></span><br><span class="line"># 2.查询表中的多个字段</span><br><span class="line">SELECT last_name,salary,email FROM employees;</span><br><span class="line"></span><br><span class="line"># 3.查询表中的所有字段</span><br><span class="line"># 方式一：</span><br><span class="line">SELECT </span><br><span class="line">	&#96;first_name&#96;,</span><br><span class="line">	&#96;last_name&#96;,</span><br><span class="line">	&#96;email&#96;,</span><br><span class="line">	&#96;phone_number&#96;,</span><br><span class="line">	&#96;salary&#96;,</span><br><span class="line">	&#96;job_id&#96;,</span><br><span class="line">	&#96;commission_pct&#96;,</span><br><span class="line">	&#96;manager_id&#96;,</span><br><span class="line">	&#96;department_id&#96;,</span><br><span class="line">	&#96;hiredate&#96;</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br><span class="line"># 方式二:</span><br><span class="line">SELECT * FROM employees;</span><br><span class="line"></span><br><span class="line"># 4.查询常量值</span><br><span class="line">SELECT 100;</span><br><span class="line">SELECT &#39;john&#39;;</span><br><span class="line"></span><br><span class="line"># 5.查询表达式</span><br><span class="line">SELECT 100%98;</span><br><span class="line"></span><br><span class="line"># 6.查询函数</span><br><span class="line">SELECT VERSION();</span><br><span class="line"></span><br><span class="line"># 7.起别名</span><br><span class="line">&#x2F;*</span><br><span class="line">1. 便于理解</span><br><span class="line">2. 如果要查询的字段有重名的情况，使用别名可以区分开来</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"># 方式一：</span><br><span class="line">SELECT 100%98 AS 结果;</span><br><span class="line">SELECT last_name AS 姓,first_name AS 名 FROM employees;</span><br><span class="line"></span><br><span class="line"># 方式二：</span><br><span class="line">SELECT last_name 姓,first_name 名 FROM employees;</span><br><span class="line"></span><br><span class="line"># 案例：查询salary, 显示结果为 out put</span><br><span class="line">SELECT salary AS &quot;out put&quot; FROM employees;</span><br><span class="line"></span><br><span class="line"># 8.去重</span><br><span class="line"></span><br><span class="line"># 案例：查询员工表中涉及到的所有的部门编号</span><br><span class="line">SELECT DISTINCT department_id FROM employees;</span><br><span class="line"></span><br><span class="line"># 9.+号的作用</span><br><span class="line">&#x2F;*</span><br><span class="line">java 中的 + 号</span><br><span class="line">1. 运算符，两个操作数都是数值型</span><br><span class="line">2. 连接符，只要有一个操作数为字符串</span><br><span class="line"></span><br><span class="line">mysql的+号</span><br><span class="line"></span><br><span class="line">select 10+90; 两个操作数都为数值型，则做加法运算</span><br><span class="line">select &#39;123&#39;+90; 其中一方为字符型，试图将字符型数值转换成数值型</span><br><span class="line">		 如果转换成功，则继续做加法运算</span><br><span class="line">		 如果转换失败，则将字符型数值转换成0</span><br><span class="line">select &#39;join&#39;+90;</span><br><span class="line">select null+10;只要一方为null，则结果肯定为null；</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"># 案例： 查询员工名和姓连接成一个字段，并显示为姓名</span><br><span class="line">SELECT CONCAT(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;) AS 结果;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	CONCAT(last_name,&#39;-&#39;,first_name) AS 姓名</span><br><span class="line">FROM </span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>

<p>练习题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#1.显示表departments的结构，并查询其中的全部数据</span><br><span class="line"></span><br><span class="line">DESC &#96;departments&#96;;</span><br><span class="line">SELECT * FROM &#96;departments&#96;</span><br><span class="line"></span><br><span class="line">#2. 显示出表employees中的全部job_id（不能重复）</span><br><span class="line">SELECT DISTINCT job_id FROM employees;</span><br><span class="line"></span><br><span class="line">#3.显示出表employees的全部列，各个列之间用逗号连接,列头显示成OUT_PUT</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	IFNULL(commission_pct,0) AS 奖金率,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br><span class="line">	</span><br><span class="line">#--------------------------------------------	</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	CONCAT(&#96;first_name&#96;,&#39;,&#39;,&#96;last_name&#96;,&#39;,&#39;,&#96;job_id&#96;,&#39;,&#39;,IFNULL(commission_pct,0)) AS output</span><br><span class="line">FROM </span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>



<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line"># 进阶2：条件查询</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">	select</span><br><span class="line">		查询列表</span><br><span class="line">	from</span><br><span class="line">		表名</span><br><span class="line">	where	</span><br><span class="line">		筛选条件;</span><br><span class="line">分类：</span><br><span class="line">	一、按条件表达式筛选</span><br><span class="line">	条件运算符： &gt; &lt; &#x3D; !&#x3D; &lt;&gt; &gt;&#x3D; &lt;&#x3D;</span><br><span class="line">	二、按逻辑表达式筛选</span><br><span class="line">	逻辑运算符：</span><br><span class="line">		&amp;&amp; || !</span><br><span class="line">		and or not</span><br><span class="line">	&amp;&amp;和and：两个条件都为true,结果为true,反之false</span><br><span class="line">	||或or： 只要有一个条件为true,结果为true，反之为false</span><br><span class="line">	</span><br><span class="line">	三、模糊查询</span><br><span class="line">		like</span><br><span class="line">		between and</span><br><span class="line">		in </span><br><span class="line">		is null</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#一、按条件表达式筛选</span><br><span class="line"># 案例1：查询工资&gt;12000的员工信息</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary&gt;12000;</span><br><span class="line"></span><br><span class="line"># 案例2：查询部门编号不等于90号的员工名和部门编号</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_id</span><br><span class="line">FROM </span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id&lt;&gt;90;</span><br><span class="line"></span><br><span class="line"># 按逻辑运算符筛选</span><br><span class="line"></span><br><span class="line">#案例1：查询工资在10000到20000之间的员工名、工资以及奖金</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &gt;&#x3D; 10000 AND salary &lt;&#x3D;20000;</span><br><span class="line"></span><br><span class="line">#案例2：查询部门编号不是再90到110之间，或者工资高于15000的员工信息</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM </span><br><span class="line">	employees</span><br><span class="line">WHERE </span><br><span class="line">	department_id&lt;90 OR department_id&gt;110 OR salary&gt;15000;</span><br><span class="line">	</span><br><span class="line">三、模糊运算符</span><br><span class="line">&#x2F;*</span><br><span class="line">like</span><br><span class="line">特点：</span><br><span class="line">①一般和通配符搭配使用</span><br><span class="line">	通配符：</span><br><span class="line">	% 任意多个字符，包含0个字符</span><br><span class="line">	_ 任意单个字符</span><br><span class="line">between and </span><br><span class="line">in </span><br><span class="line">is null | is not null</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#1.like</span><br><span class="line"></span><br><span class="line">#案例1：查询员工名中包含字符a的员工信息</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	last_name LIKE &#39;%a%&#39;;</span><br><span class="line">#案例2：查询员工名中第三个字符为n,第五个字符为l的员工名和工资</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	last_name LIKE &#39;__n_l%&#39;;</span><br><span class="line">	</span><br><span class="line">#案例3：查询员工名中第二个字符为_的员工名</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	last_name</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	last_name LIKE &#39;_$_%&#39; ESCAPE &#39;$&#39;;</span><br><span class="line"></span><br><span class="line">#2.between and </span><br><span class="line">&#x2F;*</span><br><span class="line">  1.使用between and 可以提高语句的简介度</span><br><span class="line">  2.包含临界值</span><br><span class="line">  3.两个临界值不要调换顺序</span><br><span class="line">  </span><br><span class="line">*&#x2F;</span><br><span class="line"># 案例1：查询员工编号在100到120之间的员工信息</span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM 	</span><br><span class="line">	employees</span><br><span class="line">WHERE	</span><br><span class="line">	employee_id &gt;&#x3D; 100 AND employee_id &lt;&#x3D; 120;</span><br><span class="line"></span><br><span class="line">#------------------------------------------------</span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM 	</span><br><span class="line">	employees</span><br><span class="line">WHERE	</span><br><span class="line">	employee_id BETWEEN 100 AND 120;</span><br><span class="line"></span><br><span class="line">#3.in</span><br><span class="line">&#x2F;*</span><br><span class="line">含义：判断某字段的值是否属于in列表中的某一项</span><br><span class="line">特点：</span><br><span class="line">	使用in提高语句简洁度</span><br><span class="line">	in列表的值类型必须一致或者兼容</span><br><span class="line">	不支持通配符</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#案例：查询员工的工种编号是 IT——PROG、AD_VP、AD_PRES中的一个员工名和工种编号</span><br><span class="line">SELECT </span><br><span class="line">	last_name,</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	job_id &#x3D; &#39;IT_PROT&#39; OR job_id &#x3D; &#39;AD_VP&#39; OR JOB_ID &#x3D; &#39;AD_PRES&#39;;</span><br><span class="line">	</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	last_name,</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	JOB_ID IN (&#39;IT_PROT&#39;,&#39;AD_VP&#39;,&#39;AD_PRES&#39;);</span><br><span class="line"></span><br><span class="line">#4、is null</span><br><span class="line">&#x2F;*</span><br><span class="line">&#x3D; 或者 &lt;&gt; 不能用于判断Null值</span><br><span class="line">is null 或 is not null 可以判断null值</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#案例1:查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct &#x3D; NULL;</span><br><span class="line">#------------------------------------	</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct IS NULL;	</span><br><span class="line"></span><br><span class="line">#案例2:查询有奖金的员工名和奖金率	</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct IS NOT NULL;		</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#安全等于：   &lt;&#x3D;&gt;</span><br><span class="line">#案例1:查询没有奖金的员工名和奖金率	</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct &lt;&#x3D;&gt; NULL;</span><br><span class="line">		</span><br><span class="line">#案例2:查询工资为12000的员工信息	</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &lt;&#x3D;&gt; 12000;</span><br><span class="line"></span><br><span class="line"># is null   PK   &lt;&#x3D;&gt;</span><br><span class="line">&#x2F;*</span><br><span class="line"> IS NULL:仅可以判断NULL值，可读性较高，建议使用</span><br><span class="line"> &lt;&#x3D;&gt; : 既可以判断NULL值，又可以判断普通的数值，可读性较低</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.查询员工号为176的员工的姓名和部门号和年薪</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_id,</span><br><span class="line">	salary*12*(1+IFNULL(commission_pct,0)) AS 年薪</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br></pre></td></tr></table></figure>

<h4 id="复习"><a href="#复习" class="headerlink" title="复习"></a>复习</h4><p>一、数据库的好处</p>
<ol>
<li>可以持久化数据到本地</li>
<li>结构化查询</li>
</ol>
<p>二、数据库的常见概念 ⭐</p>
<ol>
<li>DB：数据库，存储数据的容器</li>
<li>DBMS：数据库管理系统，又称为数据库软件或者数据库库产品，用于创建或管理DB</li>
<li>SQL：结构化查询语言，用于数据库通信的语言，不是某个数据库软件特有的，而是几乎所有的主流数据库软件通用的语言</li>
</ol>
<p>三、数据库存储数据的特点</p>
<ol>
<li>数据存放在表中，然后表再放到库中</li>
<li>一个库中可以有多张表，每张表具有唯一的表名来标识自己</li>
<li>表中有一个或多个列，列又称为“字段”，相当于java中“属性”</li>
<li>表中的每一行数据，相当于java中“对象”</li>
</ol>
<p>四、常见的数据库管理系统</p>
<p>mysql、oracle、db2、sqlserver5</p>
<p><strong>MySQL的介绍*</strong></p>
<ol>
<li><p>MySQL的背景</p>
<p> 前身是瑞典的一家3公司，MySQL AB</p>
<p> 08年被sun公司收购</p>
<p> 09年sun被oracle收购</p>
</li>
<li><p>MySQL的优点</p>
<ul>
<li>开源、免费、成本低</li>
<li>性能高、移植性好</li>
<li>体积小，便于安装</li>
</ul>
</li>
<li><p>MySQL的安装</p>
<p> 属于C/S架构的软件，一般来讲安装服务端</p>
<p> <strong>C/S模式</strong>                                             <strong>B/S模式</strong></p>
<p> 客户/服务器模式                        浏览器/服务器模式</p>
<p> 胖客户/瘦服务器                        瘦客服、胖服务器</p>
<p> QQ、微信、飞信                        浏览器就可以完成操作</p>
<p> ​                                                    WebQQ、洛克王国、七雄争霸等</p>
</li>
<li><p>MySQL服务的启动和停止</p>
<p> 方式一：通过命令行</p>
<p> ​    net star  服务名<br> ​    net stop 服务名</p>
<p> 方式二：计算机–右击–管理–服务</p>
</li>
<li><p>MySQL服务的登录和退出</p>
<p> 登录：mysql  【-h 主机名  -p 端口号】 -u 用户名  -p密码<br> 退出： exit 或 ctrl + C</p>
</li>
</ol>
<p><strong>基础查询</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 基础查询</span><br><span class="line">select 查询列表</span><br><span class="line">from	表名；</span><br><span class="line"></span><br><span class="line">1、查询列表可以是字段、常量、表达式、函数，也可以是多个</span><br><span class="line">2、查询结果是一个虚拟表</span><br><span class="line"></span><br><span class="line">三、示例</span><br><span class="line">1、查询单个字段</span><br><span class="line">select 字段名 from 表名;</span><br><span class="line">2、查询多个字段</span><br><span class="line">select 字段名，字段名 from 表名；</span><br><span class="line">3、查询所有字段</span><br><span class="line">select * from 表名;</span><br><span class="line">4、查询常量</span><br><span class="line">select 常量值；</span><br><span class="line">注意：字符型和日期型的常量值必须用单引号引起来，数值型不需要</span><br><span class="line">5、查询函数</span><br><span class="line">select 函数名(实参列表);</span><br><span class="line">6、查询表达式</span><br><span class="line">select 100&#x2F;1234;</span><br><span class="line">7、起别名</span><br><span class="line"> AS</span><br><span class="line"> 空格</span><br><span class="line">8、去重</span><br><span class="line">select distinct 字段名 from 表名;</span><br><span class="line">9、 + 号</span><br><span class="line">作用：做加法运算</span><br><span class="line">select 数值+数值;  直接运算</span><br><span class="line">select 字符+数值;先试图将字符转换成数值，如果转换成功，则继续运算;否则转换成0，再做运算</span><br><span class="line">select null+值;  结果都为null</span><br><span class="line"></span><br><span class="line">10、【补充】concat函数</span><br><span class="line">功能：拼接字符</span><br><span class="line">select concat(字符1,字符2,字符3...);</span><br><span class="line"></span><br><span class="line">11、【补充】ifnull函数</span><br><span class="line">功能:判断某字段或者表达式是否为null，如果为null 返回指定的值，否则返回原本的值</span><br><span class="line">select ifnull(commission_pct,0) from employees;</span><br><span class="line"></span><br><span class="line">12、【补充】isnull函数</span><br><span class="line">功能：判断某字段或者表达式是否为null，如果是，则返回1，否则返回0</span><br></pre></td></tr></table></figure>



<p><strong>条件查询</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表名</span><br><span class="line">where 筛选条件</span><br><span class="line"></span><br><span class="line">筛选条件的分类</span><br><span class="line">1、简单条件运算符</span><br><span class="line">&gt;  &lt;  &#x3D;  &lt;&gt;  !&#x3D;  &gt;&#x3D;  &lt;&#x3D;  &lt;&#x3D;&gt;安全等于</span><br><span class="line">2、逻辑运算符</span><br><span class="line">&amp;&amp; and</span><br><span class="line">|| or</span><br><span class="line">！ not</span><br><span class="line"></span><br><span class="line">3、模糊查询</span><br><span class="line">like:一般搭配通配符使用，可以判断字符型或数值型</span><br><span class="line">通配符:%任意多个字符，_任意单个字符</span><br><span class="line"></span><br><span class="line">between and</span><br><span class="line">in</span><br><span class="line">is null &#x2F; is not null :用于判断null</span><br><span class="line"></span><br><span class="line">is null PK &lt;&#x3D;&gt;</span><br><span class="line">				普通类型的数值		null值		可读性</span><br><span class="line">is null			X				√			  √</span><br><span class="line">&lt;&#x3D;&gt;				√				√			  √</span><br></pre></td></tr></table></figure>



<h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">#进阶3：排序查询</span><br><span class="line">&#x2F;*</span><br><span class="line">#引入</span><br><span class="line">select * from employees;</span><br><span class="line">#按照原表显示</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">	select 查询列表</span><br><span class="line">	from	表</span><br><span class="line">	【where 筛选条件】</span><br><span class="line">	order by 排序列表  【asc|desc】  </span><br><span class="line">特点	</span><br><span class="line">	asc  从低到高</span><br><span class="line">	DESC 从高到低</span><br><span class="line">	不写默认ASC</span><br><span class="line">	</span><br><span class="line">	order by 可以支持单个字段、多个字段、表达式、函数、别名</span><br><span class="line">	order by 一般放在查询语句的最后面,limit 字句除外</span><br><span class="line">	</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#案例：查询员工信息，要求工资从高到低排序</span><br><span class="line">#DESC</span><br><span class="line">SELECT</span><br><span class="line">	* </span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">ORDER BY</span><br><span class="line">	salary DESC;</span><br><span class="line"></span><br><span class="line">#工资从低到高排序 ASC	</span><br><span class="line">SELECT</span><br><span class="line">	* </span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">ORDER BY</span><br><span class="line">	salary ASC;</span><br><span class="line">	</span><br><span class="line">#案例2：查询部门编号&gt;&#x3D;90的员工信息，按入职时间先后排序【添加筛选条件】</span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id &gt;&#x3D; 90</span><br><span class="line">ORDER BY </span><br><span class="line">	hiredate ASC;</span><br><span class="line">	</span><br><span class="line">#案例3: 按年薪的高低显示员工的信息和 年薪【按表达式排序】</span><br><span class="line">SELECT	</span><br><span class="line">	*,</span><br><span class="line">	salary * 12 * (1 + IFNULL(commission_pct,0)) AS 年薪</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line"></span><br><span class="line">ORDER BY salary * 12 * (1 + IFNULL(commission_pct,0)) ASC;</span><br><span class="line"></span><br><span class="line">#案例4：按年薪的高低显示员工的信息和 年薪【按别名排序】</span><br><span class="line">SELECT	</span><br><span class="line">	*,</span><br><span class="line">	salary * 12 * (1 + IFNULL(commission_pct,0)) AS 年薪</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line"></span><br><span class="line">ORDER BY 年薪 ASC;</span><br><span class="line"></span><br><span class="line">#案例5：按照姓名的长度显示员工的姓名和工资【按函数排序】</span><br><span class="line">SELECT</span><br><span class="line">	LENGTH(last_name) 字节长度,last_name,salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">ORDER BY 字节长度 ASC;</span><br><span class="line"></span><br><span class="line">#案例6：查询员工信息，要求先按照工资排序，在按员工编号排序【按照多个字段排序】</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">ORDER BY salary ASC,employee_id DESC;</span><br><span class="line"></span><br><span class="line">#测试题2</span><br><span class="line">#1、查询员工的姓名和部门号和年薪，按年薪降序  按姓名升序</span><br><span class="line">SELECT</span><br><span class="line">	last_name AS 姓名,</span><br><span class="line">	department_id AS 部门号,</span><br><span class="line">	salary * 12 * ( 1 + IFNULL(commission_pct,0)) AS 年薪</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">ORDER BY</span><br><span class="line">	年薪 ASC, 姓名 DESC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2、选择工资不在8000到17000的员工的姓名和工资，按工资降序</span><br><span class="line">SELECT</span><br><span class="line">	last_name AS 姓名,</span><br><span class="line">	salary	AS 工资</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &lt; 8000 OR salary &gt; 17000</span><br><span class="line">ORDER BY </span><br><span class="line">	工资 DESC;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3、查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序</span><br><span class="line">SELECT</span><br><span class="line">	LENGTH(email) AS 邮箱字节数,</span><br><span class="line">	department_id AS 部门号</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	email LIKE  &#39;%e%&#39;</span><br><span class="line">ORDER BY </span><br><span class="line">	部门号 ASC, 邮箱字节数 DESC;</span><br></pre></td></tr></table></figure>



<h4 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h4><ul>
<li><strong>字符函数</strong></li>
<li><strong>数字函数</strong></li>
<li><strong>日期函数</strong></li>
<li><strong>其他函数【补充】</strong></li>
<li><strong>流程控制函数【补充】</strong></li>
</ul>
<h5 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">#进阶4：常见函数</span><br><span class="line">&#x2F;*</span><br><span class="line">概念：类似于java的方法，将一组逻辑语句封装在方法体中，对外暴露方法名</span><br><span class="line">好处：</span><br><span class="line">	1、隐藏了实现细节</span><br><span class="line">	2、提高代码的重用性</span><br><span class="line">	</span><br><span class="line">调用：</span><br><span class="line">	select 函数名(实参列表)</span><br><span class="line">	【from 表】;</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">	叫什么（函数名）</span><br><span class="line">	干什么（函数的功能）</span><br><span class="line">	</span><br><span class="line">分类：</span><br><span class="line">	1、单行函数</span><br><span class="line">		如：concat、length、ifnull等</span><br><span class="line">	2、分组函数</span><br><span class="line">	功能：做统计使用，又称为统计函数、聚合函数、组函数</span><br><span class="line">*&#x2F;</span><br><span class="line">#1、字符函数</span><br><span class="line"># length 获取参数值的字节个数</span><br><span class="line">SELECT LENGTH(&#39;john&#39;);</span><br><span class="line">SELECT LENGTH(&#39;张三丰hahaha&#39;);</span><br><span class="line"></span><br><span class="line">#查看客户端字符集 utf-8</span><br><span class="line">SHOW VARIABLES LIKE &#39;%char%&#39;;</span><br><span class="line"></span><br><span class="line">#2、concat 拼接字符串</span><br><span class="line">SELECT CONCAT(last_name,&#39;_&#39;,first_name) AS 姓名 FROM employees;</span><br><span class="line"></span><br><span class="line">#3、upper、lower</span><br><span class="line">#大写</span><br><span class="line">SELECT UPPER(&#39;john&#39;);</span><br><span class="line">#小写</span><br><span class="line">SELECT LOWER(&#39;john&#39;);</span><br><span class="line"></span><br><span class="line">#示例：将姓变大写，名变小写，然后拼接</span><br><span class="line">SELECT</span><br><span class="line">	CONCAT(UPPER(last_name),&#39;_&#39;,LOWER(first_name)) AS 姓名</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br><span class="line"></span><br><span class="line">#4、substr, substring</span><br><span class="line">#注意：索引从1开始</span><br><span class="line">#截取从指定索引处后面的所有字符</span><br><span class="line">SELECT SUBSTR(&#39;李莫愁爱上了陆展元&#39;,7) AS out_put;</span><br><span class="line"></span><br><span class="line">#截取从指定索引处指定字符长度的字符</span><br><span class="line">SELECT SUBSTR(&#39;李莫愁爱上了陆展元&#39;,1,3) AS out_put;</span><br><span class="line"></span><br><span class="line">#案例：姓名中首字符大写，其他字符小写然后用_拼接，显示出来</span><br><span class="line">SELECT CONCAT(UPPER(SUBSTR(&#96;last_name&#96;,1,1)),&#39;_&#39;,LOWER(SUBSTR(last_name,2))) AS 姓名</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br><span class="line"></span><br><span class="line">#5、instr</span><br><span class="line">#返回子串第一次出现的索引，如果找不到返回0</span><br><span class="line">SELECT INSTR(&quot;杨不悔爱上了殷六侠&quot;,&#39;殷六侠&#39;) AS output</span><br><span class="line"></span><br><span class="line">#6、trim</span><br><span class="line">SELECT LENGTH(TRIM(&#39;   张翠山   &#39;)) AS output;</span><br><span class="line"></span><br><span class="line">SELECT TRIM(&#39;a&#39; FROM &#39;aaaaaa张aaaaa翠山aaaaa&#39;) AS output;</span><br><span class="line"></span><br><span class="line">#7、lpad 用指定的字符实现左填充指定长度</span><br><span class="line">SELECT LPAD(&#39;殷素素&#39;,10,&#39;*&#39;) AS output;</span><br><span class="line"></span><br><span class="line">#8、lpad 用指定的字符实现右填充指定长度</span><br><span class="line">SELECT RPAD(&#39;殷素素&#39;,10,&#39;*&#39;) AS output;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#9、replace  替换</span><br><span class="line">SELECT REPLACE(&#39;张无忌爱上了周芷若&#39;,&#39;周芷若&#39;,&#39;赵敏&#39;) AS output;</span><br></pre></td></tr></table></figure>

<h5 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#-------------------------------------------------------------------------------#</span><br><span class="line">#二、数学函数</span><br><span class="line"></span><br><span class="line">#1、round 四舍五入</span><br><span class="line">SELECT ROUND(-1.55);  #-2</span><br><span class="line">SELECT ROUND(1.567,2) #小数点后面保留两位</span><br><span class="line"></span><br><span class="line">#2、ceil 向上取整,返回 &gt;&#x3D; 该参数的最小整数</span><br><span class="line">SELECT CEIL(1.00002);</span><br><span class="line"></span><br><span class="line">#3、floor 向下取整,返回 &lt;&#x3D; 该参数的最大整数</span><br><span class="line">SELECT FLOOR(-9.99);</span><br><span class="line"></span><br><span class="line">#4、truncate 截断</span><br><span class="line">SELECT TRUNCATE(1.65,1); #小数点后面保留一位</span><br><span class="line"></span><br><span class="line">#5、mod取余</span><br><span class="line">&#x2F;*</span><br><span class="line">mod(a,b)  :    a-a&#x2F;b*b</span><br><span class="line">mod(-10,-3) :  -10- (-10)&#x2F;(-3)  * (-3)  &#x3D; -1</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT MOD(-10,-3);</span><br><span class="line">SELECT 10%3;</span><br></pre></td></tr></table></figure>

<h5 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h5><p>时间函数格式：</p>
<img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1586647591.jpg/Hao"/>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#-------------------------------------------------------------------------------#</span><br><span class="line">#三、日期函数</span><br><span class="line">#1、now 返回当前系统日期 + 时间</span><br><span class="line">SELECT NOW();</span><br><span class="line"></span><br><span class="line">#2、curdate 返回当前系统日期，不包含时间</span><br><span class="line">SELECT CURDATE();</span><br><span class="line"></span><br><span class="line">#3、curtime 返回当前时间，不包含日期</span><br><span class="line">SELECT CURTIME();</span><br><span class="line"></span><br><span class="line">#4、可以获取指定的部分，年、月、日、小时、分钟、秒</span><br><span class="line">SELECT YEAR(NOW()) AS 年;</span><br><span class="line">SELECT YEAR(&#39;1998-1-1&#39;) AS 年;</span><br><span class="line"></span><br><span class="line">SELECT YEAR(hiredate) AS 年 FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MONTH(NOW()) AS 月;</span><br><span class="line"></span><br><span class="line">SELECT MONTHNAME(NOW()) AS 月;</span><br><span class="line"></span><br><span class="line">#5、str_to_date:将日期格式的字符转换成指定格式的日期</span><br><span class="line">SELECT STR_TO_DATE(&#39;9-13-1999&#39;,&#39;%m-%d-%Y&#39;) AS &#39;Date&#39;;</span><br><span class="line">SELECT STR_TO_DATE(&#39;1998-3-2&#39;,&#39;%Y-%c-%d&#39;) AS &#39;Date&#39;;</span><br><span class="line"></span><br><span class="line">#示例：查询入职日期为1992-4-3的员工信息</span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	hiredate &#x3D; &#39;1992-4-3&#39;;</span><br><span class="line">#--------------------------------------------------------	</span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	hiredate &#x3D; STR_TO_DATE(&#39;4-3 1992&#39;,&#39;%c-%d %Y&#39;);</span><br><span class="line"></span><br><span class="line">#6、date_format:将日期转换成字符</span><br><span class="line">SELECT DATE_FORMAT(&#39;2018&#x2F;6&#x2F;6&#39;,&#39;%Y年%m月%d日&#39;) AS &#39;date&#39;</span><br><span class="line"></span><br><span class="line">#查询有奖金的员工名和入职日期（xx月&#x2F;xx日 xx年）</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	DATE_FORMAT(hiredate,&#39;%m年&#x2F;%d日 %Y年&#39;)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	ISNULL(commission_pct);</span><br></pre></td></tr></table></figure>

<h5 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#-----------------------------------------------------------</span><br><span class="line"># 四、其他函数</span><br><span class="line">SELECT VERSION();</span><br><span class="line">SELECT DATABASE();</span><br><span class="line">SELECT USER();</span><br></pre></td></tr></table></figure>

<h5 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">#五、流程控制函数</span><br><span class="line">#1、if函数： if else 的效果</span><br><span class="line">SELECT IF(10&gt;5,&#39;大&#39;,&#39;小&#39;);</span><br><span class="line"></span><br><span class="line">#查询是否有奖金</span><br><span class="line">SELECT </span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct,</span><br><span class="line">	IF(commission_pct IS NULL,&#39;没奖金哈哈&#39;,&#39;有奖金，嘻嘻&#39;) AS &#39;是否有奖金&#39;</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line"></span><br><span class="line">#2、case函数的使用一： switch case的效果</span><br><span class="line">&#x2F;*</span><br><span class="line">java中</span><br><span class="line">	switch(变量或表达式)&#123;</span><br><span class="line">	case 常量1： 语句1；break；</span><br><span class="line">	...</span><br><span class="line">	default:语句n;break;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">mysql中</span><br><span class="line"></span><br><span class="line">case 要判断的字段或者表达式</span><br><span class="line">when 常量1 then 要显示的值1或语句1;</span><br><span class="line">when 常量2 then 要显示的值2或语句2；</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;*案例：查询员工的工资，要求</span><br><span class="line">	部门号 &#x3D; 30，显示的工资为1.1倍;</span><br><span class="line">	部门号 &#x3D; 40，显示的工资为1.2倍;</span><br><span class="line">	部门号 &#x3D; 50，显示的工资为1.3倍;</span><br><span class="line">	其他部门，显示的工资为原工资;</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">	salary AS 原始工资,</span><br><span class="line">	department_id,</span><br><span class="line">CASE department_id</span><br><span class="line">WHEN 30 THEN salary*1.1</span><br><span class="line">WHEN 40 THEN salary*1.2</span><br><span class="line">WHEN 50 THEN salary*1.3</span><br><span class="line">ELSE salary</span><br><span class="line">END AS 新工资</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#3、case 函数的使用二：类似于 多重 if</span><br><span class="line">&#x2F;*</span><br><span class="line">java中：</span><br><span class="line">	if(条件1)｛</span><br><span class="line">		语句1；</span><br><span class="line">	｝else if(条件2)</span><br><span class="line">	｛</span><br><span class="line">		语句2；</span><br><span class="line">	｝</span><br><span class="line">	...</span><br><span class="line">	else&#123;</span><br><span class="line">		语句n；</span><br><span class="line">	&#125;</span><br><span class="line">mysql中：</span><br><span class="line">case</span><br><span class="line">when 条件1 then 要显示的值1或语句1</span><br><span class="line">when 条件2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#案例：查询员工的工资的情况</span><br><span class="line">&#x2F;*</span><br><span class="line">如果工资&gt;20000，显示A级别</span><br><span class="line">如果工资&gt;15000，显示B级别</span><br><span class="line">如果工资&gt;10000，显示C级别</span><br><span class="line">否则，显示D级别</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT</span><br><span class="line">	salary,</span><br><span class="line">CASE</span><br><span class="line">WHEN salary&gt;20000 THEN &#39;A&#39;</span><br><span class="line">WHEN salary&gt;15000 THEN &#39;B&#39;</span><br><span class="line">WHEN salary&gt;10000 THEN &#39;C&#39;</span><br><span class="line">ELSE &#39;D&#39;</span><br><span class="line">END AS &#39;工资级别&#39;</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>

<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><p>常见的函数：</p>
<p>一、单行函数</p>
<ul>
<li>字符函数：<ul>
<li>length</li>
<li>concat</li>
<li>substr</li>
<li>instr</li>
<li>trim</li>
<li>upper</li>
<li>lower</li>
<li>lpad</li>
<li>rpad</li>
<li>replace</li>
</ul>
</li>
<li>数学函数<ul>
<li>round</li>
<li>ceil</li>
<li>floor</li>
<li>truncate</li>
<li>mod</li>
</ul>
</li>
<li>日期函数：<ul>
<li>now</li>
<li>curdate</li>
<li>curtime</li>
<li>year</li>
<li>month</li>
<li>monthname</li>
<li>day</li>
<li>hour</li>
<li>minute</li>
<li>second</li>
<li>str_to_date</li>
<li>date_format</li>
</ul>
</li>
<li>其他函数：<ul>
<li>version</li>
<li>database</li>
<li>user</li>
</ul>
</li>
<li>控制函数<ul>
<li>if</li>
<li>case</li>
</ul>
</li>
</ul>
<h4 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#---------------------------------------</span><br><span class="line">#二、分组函数</span><br><span class="line">&#x2F;*</span><br><span class="line">功能：用于统计使用，又称为聚合函数或统计函数或组函数</span><br><span class="line">分类：</span><br><span class="line">	sum求和</span><br><span class="line">	avg平均值</span><br><span class="line">	max最大值</span><br><span class="line">	min最小值</span><br><span class="line">	count计算个数</span><br><span class="line">	</span><br><span class="line">特点：</span><br><span class="line">	1、sum、agv 一般用于处理数值型</span><br><span class="line">	   max、min、count可以处理任何类型</span><br><span class="line">	2、以上分组函数都是忽略null值</span><br><span class="line">	3、可以和 distinct 搭配实现去重的计算</span><br><span class="line">	4、count函数</span><br><span class="line">	5、和分组函数一同查询的字段要求是group by 后的字段</span><br><span class="line">*&#x2F;</span><br><span class="line">#1、简单的使用</span><br><span class="line">SELECT SUM(salary) FROM employees;</span><br><span class="line">SELECT AVG(salary) FROM employees;</span><br><span class="line">SELECT MIN(salary) FROM employees;</span><br><span class="line">SELECT MAX(salary) FROM employees;</span><br><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	SUM(salary) AS 和,</span><br><span class="line">	ROUND(AVG(salary),2) AS 平均值,</span><br><span class="line">	MIN(salary) AS 最小值,</span><br><span class="line">	MAX(salary) AS 最大值,</span><br><span class="line">	COUNT(salary) AS 个数</span><br><span class="line">FROM </span><br><span class="line">	employees;</span><br><span class="line"></span><br><span class="line">#2、和distinct搭配</span><br><span class="line">SELECT SUM(DISTINCT salary),SUM(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">#3、count函数的详细介绍</span><br><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line">SELECT COUNT(*) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(1) FROM employees;</span><br><span class="line">#效率</span><br><span class="line">&#x2F;*</span><br><span class="line">MYISAM存储引擎下,count(*)的效率高</span><br><span class="line">INNODB存储引擎下,count(*) 和 count(1) 的效率差不多 ， 比count(字段)要高一些</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>



<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line">#进阶5：分组查询</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">	select 分组函数，列（要求出现在group by的后面）</span><br><span class="line">	from 表</span><br><span class="line">	【where 筛选条件】</span><br><span class="line">	group by 分组的列表</span><br><span class="line">	【order by 子句】</span><br><span class="line">注意：</span><br><span class="line">	查询列表必须特殊，要求是分组函数和group by 后出现的字段</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">	1、分组查询中的筛选条件微分为两类</span><br><span class="line">			数据源			位置			关键字</span><br><span class="line">	分组前筛选	原始表			group by 子句的前面	where</span><br><span class="line">	分组后筛选	分组后的结果集		group by 子句的后面	having</span><br><span class="line">	</span><br><span class="line">	①分组函数做条件肯定是放在having子句中</span><br><span class="line">	②能用分组前筛选的，优先使用分组前筛选</span><br><span class="line">	</span><br><span class="line">	2、group by子句支持单个字段分组，多个字段分组，多个子段之间用都好分没有顺序要求</span><br><span class="line">	表达式或函数用的较少</span><br><span class="line">	3、也可以添加排序，放在整个分组查询最后</span><br><span class="line">*&#x2F;</span><br><span class="line">#引入：查询每个部门的平均工资</span><br><span class="line">SELECT AVG(salary) FROM employees;</span><br><span class="line">#简单的分组查询</span><br><span class="line"></span><br><span class="line">#案例1：查询每个工种的最高工资</span><br><span class="line">SELECT MAX(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br><span class="line"></span><br><span class="line">#案例2: 查询每个位置上的部门个数</span><br><span class="line">SELECT COUNT(*),location_id</span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br><span class="line"></span><br><span class="line">#添加筛选条件</span><br><span class="line">#案例1：查询邮箱中包含a字符的，每个部门的平均信息</span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE email LIKE &#39;%a%&#39;</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">#案例2：查询有奖金的每个领导手下员工的最高工资</span><br><span class="line"></span><br><span class="line">SELECT MAX(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct IS NOT NULL</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#添加复杂的筛选条件</span><br><span class="line">#案例1：查询哪个部门的员工个数&gt;2</span><br><span class="line">#①查询每个部门的员工个数</span><br><span class="line">SELECT COUNT(*),</span><br><span class="line">	department_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY </span><br><span class="line">	department_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#②根据①的结果进行筛选，查询哪个部门的员工个数&gt;2</span><br><span class="line">SELECT COUNT(*),</span><br><span class="line">	department_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY </span><br><span class="line">	department_id</span><br><span class="line">HAVING </span><br><span class="line">	COUNT(*)&gt;2;</span><br><span class="line"></span><br><span class="line">#案例2：查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</span><br><span class="line">#①查询每个工种有奖金的员工的最高工资</span><br><span class="line">SELECT</span><br><span class="line">	job_id,</span><br><span class="line">	MAX(salary)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE </span><br><span class="line">	commission_pct IS NOT NULL</span><br><span class="line">GROUP BY job_id;</span><br><span class="line"></span><br><span class="line">#②根据①结果继续筛选，最高工资&gt;12000</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	job_id,</span><br><span class="line">	MAX(salary)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE </span><br><span class="line">	commission_pct IS NOT NULL</span><br><span class="line">GROUP BY job_id</span><br><span class="line">HAVING MAX(salary) &gt; 12000;</span><br><span class="line"></span><br><span class="line">#案例3：查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个，以及其最低工资</span><br><span class="line"></span><br><span class="line">#①查询每个领导手下的员工固定最低工资</span><br><span class="line">SELECT </span><br><span class="line">	MIN(salary),</span><br><span class="line">	manager_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	manager_id;</span><br><span class="line">#②添加筛选条件:编号&gt;102</span><br><span class="line">SELECT </span><br><span class="line">	MIN(salary),</span><br><span class="line">	manager_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	manager_id&gt;102</span><br><span class="line">GROUP BY</span><br><span class="line">	manager_id;</span><br><span class="line"></span><br><span class="line">#③添加筛选条件：最低工资&gt;5000</span><br><span class="line">SELECT </span><br><span class="line">	MIN(salary),</span><br><span class="line">	manager_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	manager_id&gt;102</span><br><span class="line">GROUP BY</span><br><span class="line">	manager_id</span><br><span class="line">HAVING</span><br><span class="line">	MIN(salary)&gt;5000;</span><br><span class="line"></span><br><span class="line">#按表达式或函数分组</span><br><span class="line">#案例：按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些</span><br><span class="line">SELECT</span><br><span class="line">	COUNT(*)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY </span><br><span class="line">	LENGTH(last_name)</span><br><span class="line">HAVING</span><br><span class="line">	COUNT(*) &gt; 5;</span><br><span class="line"></span><br><span class="line">#①查询每个长度的员工个数</span><br><span class="line">SELECT</span><br><span class="line">	COUNT(*),</span><br><span class="line">	LENGTH(last_name)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	LENGTH(last_name);</span><br><span class="line">#②添加筛选条件</span><br><span class="line">SELECT</span><br><span class="line">	COUNT(*),</span><br><span class="line">	LENGTH(last_name)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	LENGTH(last_name)</span><br><span class="line">HAVING </span><br><span class="line">	COUNT(*)&gt;5;</span><br><span class="line"></span><br><span class="line">#按照多个字段分组</span><br><span class="line">#案例：查询每个部门每个工种的员工的平均工资</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	AVG(salary),</span><br><span class="line">	department_id,</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	department_id,</span><br><span class="line">	job_id;</span><br><span class="line"></span><br><span class="line">#添加排序</span><br><span class="line">#案例:查询每个部门每个工种的员工的平均工资，并且按平均工资的高低显示</span><br><span class="line">SELECT</span><br><span class="line">	AVG(salary),</span><br><span class="line">	department_id,</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE	</span><br><span class="line">	department_id IS NOT NULL</span><br><span class="line">GROUP BY</span><br><span class="line">	department_id,</span><br><span class="line">	job_id</span><br><span class="line">HAVING AVG(salary)&gt;10000</span><br><span class="line">ORDER BY</span><br><span class="line">	AVG(salary) DESC;</span><br></pre></td></tr></table></figure>

<p>测试题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#----------------------测试------------------------	</span><br><span class="line">#1、查询各job_id的员工工资的最大值，最小值，平均值，总和，按照job_id升序</span><br><span class="line">SELECT</span><br><span class="line">	MAX(salary),</span><br><span class="line">	MIN(salary),</span><br><span class="line">	AVG(salary),</span><br><span class="line">	SUM(salary),</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	job_id</span><br><span class="line">ORDER BY </span><br><span class="line">	job_id;</span><br><span class="line"></span><br><span class="line">#2、查询员工最高工资和最低工资的差距(difference)</span><br><span class="line">SELECT</span><br><span class="line">	MAX(salary) - MIN(salary) AS difference</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br><span class="line"></span><br><span class="line">#3、查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内</span><br><span class="line">SELECT</span><br><span class="line">	MIN(salary),</span><br><span class="line">	manager_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE </span><br><span class="line">	manager_id IS NOT NULL</span><br><span class="line">GROUP BY </span><br><span class="line">	manager_id</span><br><span class="line">HAVING</span><br><span class="line">	MIN(salary) &gt;&#x3D; 6000;</span><br><span class="line"></span><br><span class="line">#4、查询所有部门的编号，员工数量和工资平均值，并按照平均工资降序</span><br><span class="line">SELECT</span><br><span class="line">	department_id,</span><br><span class="line">	COUNT(*),</span><br><span class="line">	AVG(salary)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	department_id</span><br><span class="line">ORDER BY</span><br><span class="line">	AVG(salary) DESC;</span><br><span class="line"></span><br><span class="line">#5、选择具有各个job_id的员工人数</span><br><span class="line">SELECT</span><br><span class="line">	COUNT(*) AS 员工人数,</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	job_id;</span><br></pre></td></tr></table></figure>



<h4 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#进阶6：连接查询</span><br><span class="line">&#x2F;*</span><br><span class="line">  含义：又称多表查询，当查询的字段来自于多个表时，就会用到连接查询</span><br><span class="line">  笛卡尔乘积现象：表1 有m行 ；表2 有n； 结果为 m*n行</span><br><span class="line">  发生原因：没有有效的连接条件</span><br><span class="line">  如何避免：添加有效的连接条件</span><br><span class="line">  </span><br><span class="line">  分类：</span><br><span class="line">	按年代分类：</span><br><span class="line">		sql92 标准： 仅支持内连接</span><br><span class="line">		sql99 标准【推荐】：支持 内连接 + 外连接（左外+右外）+ 交叉连接</span><br><span class="line">		</span><br><span class="line">	按功能分类：</span><br><span class="line">		内连接：</span><br><span class="line">			等值连接</span><br><span class="line">			非等值连接</span><br><span class="line">			自连接</span><br><span class="line">		外连接：</span><br><span class="line">			左外连接</span><br><span class="line">			右外连接</span><br><span class="line">			全外连接</span><br><span class="line">		</span><br><span class="line">		交叉连接：</span><br><span class="line">		</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line">SELECT * FROM boys;</span><br><span class="line"></span><br><span class="line">SELECT NAME,boyName FROM boys,beauty;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT NAME,boyName FROM boys,beauty</span><br><span class="line">WHERE beauty.&#96;boyfriend_id&#96; &#x3D; boys.&#96;id&#96;;</span><br></pre></td></tr></table></figure>



<img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1586901150(1).jpg/Hao"/>

<h5 id="SQL92标准-等值连接"><a href="#SQL92标准-等值连接" class="headerlink" title="SQL92标准-等值连接"></a>SQL92标准-等值连接</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">#一、sql92标准</span><br><span class="line">#1、等值连接</span><br><span class="line">&#x2F;*</span><br><span class="line">① 多表等值连接的结果为多表的交集部分</span><br><span class="line">② n表连接，至少需要n-1个连接条件</span><br><span class="line">③ 多表的顺序没有要求</span><br><span class="line">④ 一般需要为表起别名</span><br><span class="line">⑤ 可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例1：查询女神名和对应的男神名</span><br><span class="line">SELECT  NAME,</span><br><span class="line">	boyName</span><br><span class="line">FROM </span><br><span class="line">	boys,</span><br><span class="line">	beauty</span><br><span class="line">WHERE </span><br><span class="line">	beauty.&#96;boyfriend_id&#96; &#x3D; boys.&#96;id&#96;;</span><br><span class="line">	</span><br><span class="line">#案例2：查询员工名和对应的部门名</span><br><span class="line">SELECT</span><br><span class="line">	employees.&#96;last_name&#96; AS 员工名,</span><br><span class="line">	departments.&#96;department_name&#96; AS 部门名</span><br><span class="line">FROM</span><br><span class="line">	employees,</span><br><span class="line">	departments</span><br><span class="line">WHERE</span><br><span class="line">	employees.&#96;department_id&#96; &#x3D; departments.&#96;department_id&#96;;</span><br><span class="line">	</span><br><span class="line">#2、为表取别名</span><br><span class="line">#查询员工名、工种号、工种名</span><br><span class="line">&#x2F;*</span><br><span class="line">①提高语句的简洁度</span><br><span class="line">②区分多个重名的字段</span><br><span class="line"></span><br><span class="line">注意：如果为表起了别名，则查询的字段就不能使用原来的表名去限定</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT</span><br><span class="line">	e.last_name,</span><br><span class="line">	e.job_id,</span><br><span class="line">	j.job_title</span><br><span class="line">FROM</span><br><span class="line">	employees AS e,</span><br><span class="line">	jobs AS j</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96;;</span><br><span class="line"></span><br><span class="line">#3、两个表的顺序是否可以调换</span><br><span class="line">#查询员工名、工种号、工种名</span><br><span class="line">SELECT</span><br><span class="line">	e.last_name,</span><br><span class="line">	e.job_id,</span><br><span class="line">	j.job_title</span><br><span class="line">FROM	</span><br><span class="line">	jobs AS j,</span><br><span class="line">	employees AS e</span><br><span class="line">	</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#4、可以加筛选</span><br><span class="line">#案例：查询有奖金的员工名、部门名</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_name,</span><br><span class="line">	commission_pct</span><br><span class="line">FROM</span><br><span class="line">	employees AS e,</span><br><span class="line">	departments AS d</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;</span><br><span class="line">AND</span><br><span class="line">	e.&#96;commission_pct&#96; IS NOT NULL;</span><br><span class="line">#案例2：查询城市中第二个字符为o的部门名和城市名</span><br><span class="line">SELECT</span><br><span class="line">	department_name,</span><br><span class="line">	city</span><br><span class="line">FROM</span><br><span class="line">	departments AS d,</span><br><span class="line">	locations AS l</span><br><span class="line">WHERE</span><br><span class="line">	d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96;</span><br><span class="line">AND</span><br><span class="line">	city LIKE &#39;_o%&#39;;</span><br><span class="line">	</span><br><span class="line">#5、可以加分组</span><br><span class="line">#案例1：查询每个城市的部门个数</span><br><span class="line">SELECT</span><br><span class="line">	COUNT(*) AS 个数,</span><br><span class="line">	city</span><br><span class="line">FROM</span><br><span class="line">	departments d,</span><br><span class="line">	locations l</span><br><span class="line">WHERE</span><br><span class="line">	d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96;</span><br><span class="line">GROUP BY</span><br><span class="line">	city;</span><br><span class="line"></span><br><span class="line">#案例2：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span><br><span class="line">SELECT</span><br><span class="line">	department_name,</span><br><span class="line">	d.&#96;manager_id&#96;,</span><br><span class="line">	MIN(salary)</span><br><span class="line">FROM</span><br><span class="line">	departments AS d,</span><br><span class="line">	employees AS e</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct IS NOT NULL</span><br><span class="line">AND</span><br><span class="line">	d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;</span><br><span class="line">GROUP BY</span><br><span class="line">	department_name,</span><br><span class="line">	d.&#96;manager_id&#96;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#6、可以加排序</span><br><span class="line">#案例:查询每个工种的工种名和员工的个数，并按照员工个数降序</span><br><span class="line">SELECT</span><br><span class="line">	job_title,</span><br><span class="line">	COUNT(*)</span><br><span class="line">FROM</span><br><span class="line">	employees AS e,</span><br><span class="line">	jobs AS j</span><br><span class="line">WHERE</span><br><span class="line">	j.&#96;job_id&#96; &#x3D; e.&#96;job_id&#96;</span><br><span class="line">GROUP BY</span><br><span class="line">	job_title</span><br><span class="line">ORDER BY</span><br><span class="line">	COUNT(*) DESC;</span><br><span class="line"></span><br><span class="line">#7、实现三表连接</span><br><span class="line">#案例：查询员工名、部门名和所在城市</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_name,</span><br><span class="line">	city</span><br><span class="line">FROM</span><br><span class="line">	employees AS e,</span><br><span class="line">	departments AS d,</span><br><span class="line">	locations AS l</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;</span><br><span class="line">AND</span><br><span class="line">	l.&#96;location_id&#96; &#x3D; d.&#96;location_id&#96;;</span><br></pre></td></tr></table></figure>

<h5 id="SQL92标准-非等值连接"><a href="#SQL92标准-非等值连接" class="headerlink" title="SQL92标准-非等值连接"></a>SQL92标准-非等值连接</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#2、非等值连接</span><br><span class="line">&#x2F;*添加job_grades表</span><br><span class="line">create table job_grades</span><br><span class="line">(grade_level VARCHAR(3),</span><br><span class="line"> lowest_sal  INT,</span><br><span class="line"> highest_sal INT);</span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;A&#39;, 1000, 2999); </span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;B&#39;, 3000, 5999); </span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;C&#39;, 6000, 9999); </span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;D&#39;, 10000, 14999); </span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;E&#39;, 15000, 24999); </span><br><span class="line"></span><br><span class="line">INSERT INTO job_grades</span><br><span class="line">VALUES (&#39;F&#39;, 25000, 40000); </span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#案例1：查询员工的工资和工资级别</span><br><span class="line">SELECT</span><br><span class="line">	salary,</span><br><span class="line">	grade_level</span><br><span class="line">FROM</span><br><span class="line">	employees AS e,</span><br><span class="line">	job_grades AS g</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;salary&#96; BETWEEN g.&#96;lowest_sal&#96; AND g.&#96;highest_sal&#96;</span><br><span class="line">AND</span><br><span class="line">	g.&#96;grade_level&#96; &#x3D; &#39;A&#39;;</span><br></pre></td></tr></table></figure>

<h5 id="SQL92标准-自连接"><a href="#SQL92标准-自连接" class="headerlink" title="SQL92标准-自连接"></a>SQL92标准-自连接</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#3、自连接</span><br><span class="line">#案例：查询 员工名 和 上级的名称</span><br><span class="line">SELECT</span><br><span class="line">	e.&#96;employee_id&#96; AS 员工ID,e.&#96;last_name&#96; AS 员工姓名,</span><br><span class="line">	m.&#96;employee_id&#96; AS 领导ID,m.&#96;last_name&#96; AS 领导姓名</span><br><span class="line">FROM</span><br><span class="line">	employees AS e,</span><br><span class="line">	employees AS m</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96;;</span><br></pre></td></tr></table></figure>

<p><strong>练习测试</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#----------------------测试----------------------</span><br><span class="line">#一、显示员工表的最大工资，工资平均值</span><br><span class="line">SELECT</span><br><span class="line">	MAX(salary) AS 最大工资,</span><br><span class="line">	AVG(salary) AS 平均工资</span><br><span class="line">FROM</span><br><span class="line">	employees;</span><br><span class="line"></span><br><span class="line">#二、查询员工表的employee_id, job_id, last_name,</span><br><span class="line">#    按department_id降序，salary升序</span><br><span class="line">SELECT</span><br><span class="line">	employee_id,</span><br><span class="line">	job_id,</span><br><span class="line">	salary,</span><br><span class="line">	last_name</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">ORDER BY</span><br><span class="line">	department_id DESC,</span><br><span class="line">	salary ASC;</span><br><span class="line"></span><br><span class="line">#三、查询员工表的job_id中包含 a 和 e 的，并且 a 在 e 的前面</span><br><span class="line">SELECT</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	job_id LIKE &#39;%a%e%&#39;;</span><br><span class="line"></span><br><span class="line">#四、已知表 student， 里面有 id（学号），name（姓名），gradeID(年级编号)</span><br><span class="line">#    已知表 grade， 里面有 id（年级编号），name（年级名）</span><br><span class="line">#    已知表 result， 里面有 id（学号），score(成绩)， studentNo(学号)</span><br><span class="line">#要求查询 姓名，年级名、成绩</span><br><span class="line">SELECT</span><br><span class="line">	s.name AS 学生姓名,</span><br><span class="line">	g.name AS 年级名,</span><br><span class="line">	r.score AS 成绩</span><br><span class="line">FROM</span><br><span class="line">	student AS s,</span><br><span class="line">	grade AS g,</span><br><span class="line">	result AS r</span><br><span class="line">WHERE</span><br><span class="line">	s.gradeID &#x3D; g.id</span><br><span class="line">AND</span><br><span class="line">	s.id &#x3D; r.studentNo;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#五、显示当前日期，以及去前后空格，截取子字符串的函数</span><br><span class="line">SELECT NOW();</span><br><span class="line">SELECT TRIM(&#39;&#39; FROM &#39;&#39;);</span><br><span class="line">SELECT SUBSTR(str,startIndex);</span><br><span class="line">SELECT SUBSTR(str,startIndex,LENGTH);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br></pre></td><td class="code"><pre><span class="line">#二、sql99语法</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">	select 查询列表</span><br><span class="line">	from 表1 别名 【连接类型】</span><br><span class="line">	join 表2 别名</span><br><span class="line">	on 连接条件</span><br><span class="line">	【where 筛选条件】</span><br><span class="line">	【group by 分组】</span><br><span class="line">	【having 筛选条件】</span><br><span class="line">	【order by 排序列表】</span><br><span class="line">分类：</span><br><span class="line">内连接（⭐）：inner</span><br><span class="line">外连接</span><br><span class="line">	左外（⭐）:left【outer】</span><br><span class="line">	右外（⭐）:right【outer】</span><br><span class="line">	全外：full【outer】</span><br><span class="line">交叉连接：cross</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#一、内连接</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">	select 查询列表</span><br><span class="line">	from 表1 别名</span><br><span class="line">	inner join 表2 别名</span><br><span class="line">	on 连接条件</span><br><span class="line">分类:</span><br><span class="line">	等值</span><br><span class="line">	非等值</span><br><span class="line">	自连接</span><br><span class="line">特点：</span><br><span class="line">①添加排序、分组、筛选</span><br><span class="line">②inner可以省略</span><br><span class="line">③筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读</span><br><span class="line">*&#x2F;</span><br><span class="line">#1、等值连接</span><br><span class="line">#案例1、查询员工名、部门名</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_name</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	departments AS d</span><br><span class="line">ON</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;;</span><br><span class="line"></span><br><span class="line">#案例2、查询名字中包含e的员工名和工种名（添加筛选）</span><br><span class="line">SELECT</span><br><span class="line">	last_name AS 姓名,</span><br><span class="line">	job_title AS 工种名</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	jobs AS j</span><br><span class="line">ON </span><br><span class="line">	e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96;</span><br><span class="line">WHERE</span><br><span class="line"></span><br><span class="line">	e.last_name LIKE &#39;%e%&#39;;</span><br><span class="line"></span><br><span class="line">#3、查询部门个数&gt;3的 城市名 和 部门个数，（添加分组+筛选）</span><br><span class="line">#①查询每个城市的部门个数</span><br><span class="line">#②在①结果上筛选满足条件的</span><br><span class="line">SELECT</span><br><span class="line">	city,</span><br><span class="line">	COUNT(*)</span><br><span class="line">FROM</span><br><span class="line">	departments AS d</span><br><span class="line">INNER JOIN</span><br><span class="line">	locations AS l</span><br><span class="line">ON 	</span><br><span class="line">	d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96;</span><br><span class="line">GROUP BY</span><br><span class="line">	city</span><br><span class="line">HAVING</span><br><span class="line">	COUNT(*) &gt; 3;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例4：查询哪个部门的部门员工个数&gt;3的部门名和员工个数</span><br><span class="line">#并按个数降序（排序）</span><br><span class="line"></span><br><span class="line">#①查询每个部门的员工个数</span><br><span class="line">#②在①的结果上筛选员工个数&gt;3的记录，并排序</span><br><span class="line">SELECT</span><br><span class="line">	COUNT(*) AS 个数,</span><br><span class="line">	&#96;department_name&#96;</span><br><span class="line">FROM</span><br><span class="line">	departments AS d</span><br><span class="line">INNER JOIN</span><br><span class="line">	employees AS e</span><br><span class="line">ON</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;</span><br><span class="line">GROUP BY</span><br><span class="line">	d.&#96;department_id&#96;</span><br><span class="line">HAVING</span><br><span class="line">	COUNT(*) &gt; 3</span><br><span class="line">ORDER BY</span><br><span class="line">	COUNT(*) DESC;</span><br><span class="line">	</span><br><span class="line">#5、查询员工名、部门名、工种名，并按部门名降序（）</span><br><span class="line">SELECT</span><br><span class="line">	e.last_name,</span><br><span class="line">	d.department_name,</span><br><span class="line">	j.job_title</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	departments AS d</span><br><span class="line">ON</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;</span><br><span class="line">INNER JOIN</span><br><span class="line">	jobs AS j</span><br><span class="line">ON</span><br><span class="line">	e.&#96;job_id&#96; &#x3D; j.&#96;job_id&#96;</span><br><span class="line">ORDER BY</span><br><span class="line">	d.&#96;department_name&#96; DESC;</span><br><span class="line"></span><br><span class="line">#二、非等值连接</span><br><span class="line">#查询员工的工资级别</span><br><span class="line">SELECT</span><br><span class="line">	salary,</span><br><span class="line">	&#96;grade_level&#96;</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	job_grades AS jg</span><br><span class="line">ON</span><br><span class="line">	e.&#96;salary&#96; BETWEEN jg.&#96;lowest_sal&#96; AND jg.&#96;highest_sal&#96;;</span><br><span class="line">	</span><br><span class="line">#查询每个工资级别的个数&gt;20，并按照工资级别降序</span><br><span class="line">SELECT</span><br><span class="line">	COUNT(*),</span><br><span class="line">	&#96;grade_level&#96;</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	job_grades AS jg</span><br><span class="line">ON</span><br><span class="line">	e.&#96;salary&#96; BETWEEN jg.&#96;lowest_sal&#96; AND jg.&#96;highest_sal&#96;</span><br><span class="line">GROUP BY</span><br><span class="line">	grade_level</span><br><span class="line">HAVING</span><br><span class="line">	COUNT(*) &gt; 20</span><br><span class="line">ORDER BY </span><br><span class="line">	grade_level DESC;</span><br><span class="line">	</span><br><span class="line">#三、自连接</span><br><span class="line">#查询员工的名字 、 上级的名字</span><br><span class="line">SELECT</span><br><span class="line">	e.&#96;last_name&#96; AS 员工姓名,</span><br><span class="line">	m.&#96;last_name&#96; AS 上级姓名</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	employees AS m</span><br><span class="line">ON</span><br><span class="line">	e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96;;</span><br><span class="line">	</span><br><span class="line">#查询姓名中包含字符k的员工的名字 、 上级的名字	</span><br><span class="line">SELECT</span><br><span class="line">	e.&#96;last_name&#96; AS 员工姓名,</span><br><span class="line">	m.&#96;last_name&#96; AS 上级姓名</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	employees AS m</span><br><span class="line">ON</span><br><span class="line">	e.&#96;manager_id&#96; &#x3D; m.&#96;employee_id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;last_name&#96; LIKE &#39;%k%&#39;;</span><br><span class="line"></span><br><span class="line">#二、外连接</span><br><span class="line">&#x2F;*</span><br><span class="line">应用场景：</span><br><span class="line">	用于查询一个表中有，另一个表中没有的记录</span><br><span class="line">1、外连接的查询结果为主表中的所有记录</span><br><span class="line">	如果从表中有和它匹配的，则显示匹配的值</span><br><span class="line">	如果从表中没有和它匹配的，则显示null</span><br><span class="line">	外连接查询结果 &#x3D; 内连接查询结果 + 主表中有而从表中没有的记录</span><br><span class="line">2、左外连接，left join 左边的是主表</span><br><span class="line">   右外链接，right join 右边的是主表</span><br><span class="line">3、左外和右外交换两个表的顺序，可以实现同样的效果</span><br><span class="line"></span><br><span class="line">4、全外连接 &#x3D; 内连接的结果 + 表1中有但表2没有的 + 表2中有但表1中没有的</span><br><span class="line">*&#x2F;</span><br><span class="line">#引入：查询男朋友不在男神表的女神名</span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line"></span><br><span class="line">SELECT * FROM boys;</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	b.name,</span><br><span class="line">	bo.*</span><br><span class="line">FROM</span><br><span class="line">	beauty AS b</span><br><span class="line">LEFT OUTER JOIN</span><br><span class="line">	boys AS bo</span><br><span class="line">ON</span><br><span class="line">	b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	bo.&#96;id&#96; IS NULL;</span><br><span class="line">#右外连接</span><br><span class="line">SELECT</span><br><span class="line">	b.name,</span><br><span class="line">	bo.*</span><br><span class="line">FROM</span><br><span class="line">	boys AS bo</span><br><span class="line">RIGHT OUTER JOIN</span><br><span class="line">	beauty AS b</span><br><span class="line">ON</span><br><span class="line">	b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	bo.&#96;id&#96; IS NULL;</span><br><span class="line"></span><br><span class="line">#案例1：查询哪个部门没有员工</span><br><span class="line">#左外</span><br><span class="line">SELECT</span><br><span class="line">	d.*,</span><br><span class="line">	e.&#96;employee_id&#96;</span><br><span class="line">FROM</span><br><span class="line">	departments AS d</span><br><span class="line">LEFT OUTER JOIN</span><br><span class="line">	employees AS e</span><br><span class="line">ON</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;employee_id&#96; IS NULL;</span><br><span class="line"></span><br><span class="line">#右外</span><br><span class="line">SELECT</span><br><span class="line">	d.*,</span><br><span class="line">	e.&#96;employee_id&#96;</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">RIGHT OUTER JOIN</span><br><span class="line">	departments AS d</span><br><span class="line">ON</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; d.&#96;department_id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;employee_id&#96; IS NULL;</span><br><span class="line"></span><br><span class="line">#全外</span><br><span class="line">USE girls;</span><br><span class="line">SELECT</span><br><span class="line">	b.*,</span><br><span class="line">	bo.*</span><br><span class="line">FROM</span><br><span class="line">	beauty AS b</span><br><span class="line">FULL OUTER JOIN</span><br><span class="line">	boys AS bo</span><br><span class="line">ON </span><br><span class="line">	b.&#96;boyfriend_id&#96; &#x3D; bo.id;</span><br><span class="line">	</span><br><span class="line">#交叉连接</span><br><span class="line">SELECT </span><br><span class="line">	b.*,</span><br><span class="line">	bo.*</span><br><span class="line">FROM</span><br><span class="line">	beauty AS b</span><br><span class="line">CROSS JOIN</span><br><span class="line">	boys AS bo;</span><br><span class="line"></span><br><span class="line">#sql92 和 sql99</span><br><span class="line">#功能：sql99支持的较多</span><br><span class="line">#可读性：sql99实现连接条件和筛选条件的分离，可读性较高</span><br><span class="line"></span><br><span class="line">#-----------测试------------</span><br><span class="line">#一、查询编号&gt;3的女神的男朋友信息，如果有则列出详细，如果没有，用null填充</span><br><span class="line">SELECT</span><br><span class="line">	b.id,</span><br><span class="line">	b.&#96;name&#96;,</span><br><span class="line">	bo.*</span><br><span class="line">FROM</span><br><span class="line">	beauty AS b</span><br><span class="line">LEFT OUTER JOIN</span><br><span class="line">	boys AS bo</span><br><span class="line">ON</span><br><span class="line">	b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	b.&#96;id&#96; &gt; 3 ;</span><br><span class="line"></span><br><span class="line">#二、查询哪个城市没有部门</span><br><span class="line">SELECT</span><br><span class="line">	l.&#96;city&#96;,</span><br><span class="line">	d.*</span><br><span class="line">FROM</span><br><span class="line">	locations AS l</span><br><span class="line">LEFT OUTER JOIN</span><br><span class="line">	departments AS d</span><br><span class="line">ON</span><br><span class="line">	d.&#96;location_id&#96; &#x3D; l.&#96;location_id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	d.&#96;department_id&#96; IS NULL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#三、查询部门名为SAL或IT的员工信息</span><br><span class="line">SELECT</span><br><span class="line">	e.*,</span><br><span class="line">	d.&#96;department_name&#96;</span><br><span class="line"></span><br><span class="line">FROM</span><br><span class="line">	departments AS d</span><br><span class="line">LEFT OUTER JOIN</span><br><span class="line">	employees AS e</span><br><span class="line">ON</span><br><span class="line">	d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;</span><br><span class="line">WHERE</span><br><span class="line">	d.&#96;department_name&#96; IN(&#39;SAL&#39;,&#39;IT&#39;);</span><br></pre></td></tr></table></figure>



<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br></pre></td><td class="code"><pre><span class="line">#进阶7： 子查询</span><br><span class="line">&#x2F;*</span><br><span class="line">含义：</span><br><span class="line">出现在其他语句中的select语句，称为子查询或内查询</span><br><span class="line"></span><br><span class="line">外部的查询语句，称为主查询或外查询</span><br><span class="line"></span><br><span class="line">分类：</span><br><span class="line">	按子查询出现的位置：</span><br><span class="line">		select后面</span><br><span class="line">			仅仅支持  标量子查询</span><br><span class="line">		from后面</span><br><span class="line">			支持表子查询</span><br><span class="line">		where或having后面   ⭐</span><br><span class="line">			标量子查询（单行）  √</span><br><span class="line">			列子查询（多行）    √</span><br><span class="line">			</span><br><span class="line">			行子查询</span><br><span class="line">			</span><br><span class="line">		exists后面（相关子查询）</span><br><span class="line">			表子查询</span><br><span class="line"></span><br><span class="line">按结果集的行列数不同：</span><br><span class="line">	标量子查询（结果集只有一行一列）</span><br><span class="line">	列子查询（结果集只有一行多列）</span><br><span class="line">	行子查询（结果集有一行多列）</span><br><span class="line">	表子查询（结果集一般为多行多列）</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#一、where或having后面</span><br><span class="line">#1、标量子查询（单行子查询）</span><br><span class="line">#2、列子查询（多行子查询）</span><br><span class="line"></span><br><span class="line">#3、行子查询（多列多行）</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">特点：</span><br><span class="line">①子查询放在小括号内</span><br><span class="line">②子查询一般放在条件的右侧</span><br><span class="line">③标量子查询，一般搭配着单行操作符使用</span><br><span class="line">&gt; &lt; &gt;&#x3D; &lt;&#x3D; &#x3D; &lt;&gt;</span><br><span class="line"></span><br><span class="line">列子查询，一般搭配着多行操作符使用</span><br><span class="line">in、any&#x2F;some、all</span><br><span class="line"></span><br><span class="line">④子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#1、标量子查询（单行子查询）</span><br><span class="line">#案例1：谁的工资比 Abel 高？</span><br><span class="line">#①查询Abel的工资</span><br><span class="line">SELECT</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE </span><br><span class="line">	last_name &#x3D; &#39;Abel&#39;</span><br><span class="line">#②查询员工的信息，满足salary &gt; ① 结果</span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &gt; (</span><br><span class="line">		SELECT</span><br><span class="line">			salary</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">		WHERE </span><br><span class="line">			last_name &#x3D; &#39;Abel&#39;		</span><br><span class="line">);</span><br><span class="line">	</span><br><span class="line">#案例2：返回job_id与141号员工相同，salary比143号员工多的员工 姓名, job_id 和 工资</span><br><span class="line">#①查询141号员工的job_id</span><br><span class="line">SELECT</span><br><span class="line">	job_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	employee_id &#x3D; 141</span><br><span class="line">	</span><br><span class="line">#②查询143号员工的salary</span><br><span class="line">SELECT</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	employees_id &#x3D; 143</span><br><span class="line">	</span><br><span class="line">#③查询员工的姓名，job_id 和 工资，要求 job_id &#x3D; ① 并且 salary &gt; ②</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	job_id &#x3D; (</span><br><span class="line">	SELECT</span><br><span class="line">		job_id</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	WHERE</span><br><span class="line">		employee_id &#x3D; 141</span><br><span class="line">	)</span><br><span class="line">	AND</span><br><span class="line">	salary &gt; (</span><br><span class="line">	SELECT</span><br><span class="line">		salary</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	WHERE</span><br><span class="line">		employee_id &#x3D; 143</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例3、返回公司工资最少的员工的last_name，job_id和salary</span><br><span class="line">#①查询公司的 最低工资</span><br><span class="line">SELECT</span><br><span class="line">	MIN(salary)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">#②查询last_name,job_id和salary 要求 salary &#x3D; ①</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &#x3D; </span><br><span class="line">	(</span><br><span class="line">	SELECT</span><br><span class="line">		MIN(salary)</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	);</span><br><span class="line">	</span><br><span class="line">#案例4：查询最低工资大于 50号部门的最低工资的部门id和其最低工资</span><br><span class="line"></span><br><span class="line">#①查询50号部门的最低工资</span><br><span class="line">SELECT</span><br><span class="line">	MIN(salary)</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id &#x3D; 50;</span><br><span class="line"></span><br><span class="line">#②查询每个部门的最低工资</span><br><span class="line">SELECT</span><br><span class="line">	MIN(salary),</span><br><span class="line">	department_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	department_id;</span><br><span class="line"></span><br><span class="line">#③筛选②满足min(salary) &gt; ①</span><br><span class="line">SELECT</span><br><span class="line">	MIN(salary),</span><br><span class="line">	department_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	department_id</span><br><span class="line">HAVING	</span><br><span class="line">	MIN(salary) &gt;</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			MIN(salary)</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">		WHERE</span><br><span class="line">			department_id &#x3D; 50</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">#非法使用标量子查询</span><br><span class="line">#子查询的结果不是一行一列</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2、列子查询（多行子查询）</span><br><span class="line">#案例1、返回location_id是1400或1700的部门中的所有员工姓名</span><br><span class="line">#①查询location_id是1400或1700的部门编号</span><br><span class="line">SELECT DISTINCT</span><br><span class="line">	department_id</span><br><span class="line">FROM</span><br><span class="line">	departments</span><br><span class="line">WHERE</span><br><span class="line">	location_id &#x3D; 1400 OR location_id &#x3D; 1700;</span><br><span class="line">	</span><br><span class="line">#②查询员工姓名，要求部门号是①列表的某一个</span><br><span class="line">SELECT</span><br><span class="line">	last_name</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id</span><br><span class="line">	IN(</span><br><span class="line">		SELECT DISTINCT</span><br><span class="line">			department_id</span><br><span class="line">		FROM</span><br><span class="line">			departments</span><br><span class="line">		WHERE</span><br><span class="line">			location_id &#x3D; 1400 OR location_id &#x3D; 1700</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">#返回其他部门中比job_id为&#39;IT_PROG&#39;部门任一工资低的员工的员工号、姓名、job_id以及salary</span><br><span class="line">#①查询job_id为‘IT_PROG’部门任一工资</span><br><span class="line">SELECT DISTINCT</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	job_id &#x3D; &#39;IT_PROG&#39;;</span><br><span class="line">#②查询员工号、姓名、job_id以及salary,salary&lt;（①）的任意一个	</span><br><span class="line">SELECT</span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &lt;</span><br><span class="line">	ANY(</span><br><span class="line">		SELECT DISTINCT</span><br><span class="line">			salary</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">		WHERE</span><br><span class="line">			job_id &#x3D; &#39;IT_PROG&#39;	</span><br><span class="line">	)</span><br><span class="line">	AND</span><br><span class="line">		job_id&lt;&gt;&quot;IT_PROG&quot;;</span><br><span class="line"></span><br><span class="line">#或者</span><br><span class="line">SELECT</span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &lt;</span><br><span class="line">	(</span><br><span class="line">		SELECT DISTINCT</span><br><span class="line">			MAX(salary)</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">		WHERE</span><br><span class="line">			job_id &#x3D; &#39;IT_PROG&#39;	</span><br><span class="line">	)</span><br><span class="line">	AND</span><br><span class="line">		job_id&lt;&gt;&quot;IT_PROG&quot;;	</span><br><span class="line">	</span><br><span class="line">#返回其他部门中比job_id为&#39;IT_PROG&#39;部门所有工资低的员工的员工号、姓名、job_id以及salary</span><br><span class="line">SELECT</span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &lt;</span><br><span class="line">	ALL(</span><br><span class="line">		SELECT DISTINCT</span><br><span class="line">			salary</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">		WHERE</span><br><span class="line">			job_id &#x3D; &#39;IT_PROG&#39;	</span><br><span class="line">	)</span><br><span class="line">	AND</span><br><span class="line">		job_id&lt;&gt;&quot;IT_PROG&quot;;		</span><br><span class="line">#或者</span><br><span class="line">SELECT</span><br><span class="line">	employee_id,</span><br><span class="line">	last_name,</span><br><span class="line">	job_id,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &lt;</span><br><span class="line">	(</span><br><span class="line">		SELECT DISTINCT</span><br><span class="line">			MIN(salary)</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">		WHERE</span><br><span class="line">			job_id &#x3D; &#39;IT_PROG&#39;	</span><br><span class="line">	)</span><br><span class="line">	AND</span><br><span class="line">		job_id&lt;&gt;&quot;IT_PROG&quot;;	</span><br><span class="line">		</span><br><span class="line">#3、行子查询（结果集一行多列或多行多列）</span><br><span class="line">#案例：查询员工编号最小并且工资最高的员工信息</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	(employee_id,salary) &#x3D; (</span><br><span class="line">		SELECT MIN(employee_id),MAX(salary)</span><br><span class="line">		FROM employees);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	employee_id &#x3D;</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			MIN(employee_id)</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">	)</span><br><span class="line">	AND</span><br><span class="line">	salary &#x3D;</span><br><span class="line">	(</span><br><span class="line">		SELECT</span><br><span class="line">			MAX(salary)</span><br><span class="line">		FROM</span><br><span class="line">			employees</span><br><span class="line">	);</span><br><span class="line">	</span><br><span class="line">#二、select后面</span><br><span class="line">#案例：查询每个部门的员工个数</span><br><span class="line">SELECT</span><br><span class="line">	d.*,</span><br><span class="line">	(</span><br><span class="line">	SELECT COUNT(*)</span><br><span class="line">	FROM</span><br><span class="line">		employees AS e</span><br><span class="line">	WHERE</span><br><span class="line">		e.department_id &#x3D; d.&#96;department_id&#96;</span><br><span class="line">	</span><br><span class="line">	) AS 个数</span><br><span class="line">FROM</span><br><span class="line">	departments AS d;</span><br><span class="line"></span><br><span class="line">#案例2：查询员工号 &#x3D; 102的部门名</span><br><span class="line">SELECT</span><br><span class="line">	(</span><br><span class="line">	SELECT department_name</span><br><span class="line">	FROM departments AS d</span><br><span class="line">	INNER JOIN employees AS e</span><br><span class="line">	ON d.department_id &#x3D; e.department_id</span><br><span class="line">	WHERE </span><br><span class="line">		e.employee_id &#x3D; 102	</span><br><span class="line">	) AS 部门名;</span><br><span class="line"></span><br><span class="line">#三、from后面</span><br><span class="line">&#x2F;*</span><br><span class="line">将子查询结果充当一张表，要求必须起别名</span><br><span class="line">*&#x2F;</span><br><span class="line">#案例：查询每个部门的平均工资的工资等级</span><br><span class="line">#①查询每个部门的平均工资</span><br><span class="line">SELECT</span><br><span class="line">	AVG(salary),</span><br><span class="line">	department_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">GROUP BY</span><br><span class="line">	department_id;</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	job_grades;</span><br><span class="line"></span><br><span class="line">#②连接①的结果集和job_grades表，筛选条件平均工资 between lowest_sal and highest_sal</span><br><span class="line"></span><br><span class="line">SELECT ag_dep.*,g.&#96;grade_level&#96;</span><br><span class="line">FROM (</span><br><span class="line">	SELECT </span><br><span class="line">		AVG(salary) AS ag,</span><br><span class="line">		department_id</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	GROUP BY</span><br><span class="line">		department_id</span><br><span class="line">)AS ag_dep</span><br><span class="line">INNER JOIN job_grades AS g</span><br><span class="line">ON ag_dep.ag BETWEEN lowest_sal AND highest_sal;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#四、exists后面（相关子查询）	</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">exists（完整的查询语句）</span><br><span class="line">结果：</span><br><span class="line">1 或 0</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT EXISTS( SELECT employee_id FROM employees);</span><br><span class="line">SELECT EXISTS( SELECT employee_id FROM employees WHERE salary&#x3D;30000);</span><br><span class="line"></span><br><span class="line">#案例1：查询有员工的部门名</span><br><span class="line">SELECT</span><br><span class="line">	department_name</span><br><span class="line">FROM</span><br><span class="line">	departments AS d</span><br><span class="line">WHERE EXISTS(</span><br><span class="line">	SELECT *</span><br><span class="line">	FROM employees AS e</span><br><span class="line">	WHERE d.&#96;department_id&#96; &#x3D; e.&#96;department_id&#96;</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">#案例2：查询没有女朋友的男神信息</span><br><span class="line">#in</span><br><span class="line">SELECT bo.*</span><br><span class="line">FROM boys AS bo</span><br><span class="line">WHERE</span><br><span class="line">	bo.id NOT IN(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM beauty</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	bo.*</span><br><span class="line">FROM</span><br><span class="line">	boys AS bo</span><br><span class="line">WHERE</span><br><span class="line">	bo.&#96;id&#96; NOT IN(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM	beauty</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	boys</span><br><span class="line">WHERE</span><br><span class="line">	EXISTS(</span><br><span class="line">	SELECT boyfriend_id</span><br><span class="line">	FROM</span><br><span class="line">		beauty</span><br><span class="line">	WHERE</span><br><span class="line">		beauty.&#96;boyfriend_id&#96; &#x3D; boys.&#96;id&#96;</span><br><span class="line">	);</span><br></pre></td></tr></table></figure>

<p><strong>测试</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">#------------------------------------练习-------------------------------------</span><br><span class="line">#1、查询和 Zlotkey相同部门的员工姓名和工资</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id &#x3D; </span><br><span class="line">	(</span><br><span class="line">	SELECT</span><br><span class="line">		department_id</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	WHERE</span><br><span class="line">		last_name &#x3D; &#39;Zlotkey&#39;</span><br><span class="line">	);</span><br><span class="line">	</span><br><span class="line">#2、查询工资比公司平均工资高的员工的姓名和工资</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &gt; (</span><br><span class="line">		SELECT AVG(salary)</span><br><span class="line">		FROM employees);</span><br><span class="line"></span><br><span class="line">#3、查询各部门中工资比本部平均工资高的员工的员工号，姓名和工资</span><br><span class="line">#①查询各部门的平均工资</span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line"></span><br><span class="line">#②连接①结果集和employees表进行筛选</span><br><span class="line">SELECT</span><br><span class="line">	employee_id,last_name,salary,e.department_id</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">INNER JOIN</span><br><span class="line">	(</span><br><span class="line">	SELECT AVG(salary) AS ag,department_id</span><br><span class="line">	FROM employees</span><br><span class="line">	GROUP BY department_id</span><br><span class="line">	) AS ag_dep</span><br><span class="line">ON</span><br><span class="line">	e.department_id &#x3D; ag_dep.department_id</span><br><span class="line">WHERE</span><br><span class="line">	salary &gt; ag_dep.ag;</span><br><span class="line"></span><br><span class="line">#4、查询和姓名中包含字母u的员工在相同部门的员工的员工号和姓名</span><br><span class="line">#①查询姓名中包含字母u的员工的部门</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	department_id</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	last_name LIKE &#39;%u%&#39;</span><br><span class="line">#②查询部门号 &#x3D; ①中的任意一个的员工号和姓名</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	employee_id,</span><br><span class="line">	last_name</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id IN(</span><br><span class="line">	SELECT DISTINCT</span><br><span class="line">		department_id</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	WHERE</span><br><span class="line">		last_name LIKE &#39;%u%&#39;</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">#5、查询在部门的location_id为1700的部门工作的员工的员工号</span><br><span class="line">#①查询location_id &#x3D; 1700的部门</span><br><span class="line">SELECT DISTINCT</span><br><span class="line">	department_id </span><br><span class="line">FROM</span><br><span class="line">	departments</span><br><span class="line">WHERE</span><br><span class="line">	location_id &#x3D; 1700;</span><br><span class="line">#查询部门号&#x3D;①中任意一个的员工号</span><br><span class="line">SELECT</span><br><span class="line">	employee_id</span><br><span class="line">FROM</span><br><span class="line">	employees AS e</span><br><span class="line">WHERE</span><br><span class="line">	e.&#96;department_id&#96; &#x3D; ANY </span><br><span class="line">	(</span><br><span class="line">	SELECT DISTINCT</span><br><span class="line">	department_id </span><br><span class="line">	FROM</span><br><span class="line">		departments</span><br><span class="line">	WHERE</span><br><span class="line">		location_id &#x3D; 1700</span><br><span class="line">	);</span><br><span class="line">#6、查询管理者是king的员工姓名和工资</span><br><span class="line">#①查询姓名为king的员工编号</span><br><span class="line">	SELECT</span><br><span class="line">		employee_id</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	WHERE</span><br><span class="line">		last_name &#x3D; &#39;K_ing&#39;</span><br><span class="line">#②查询哪个员工的manager_id &#x3D; ①</span><br><span class="line">SELECT</span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	manager_id &#x3D; ANY</span><br><span class="line">	(</span><br><span class="line">	SELECT</span><br><span class="line">		employee_id</span><br><span class="line">	FROM</span><br><span class="line">		employees</span><br><span class="line">	WHERE</span><br><span class="line">		last_name &#x3D; &#39;K_ing&#39;</span><br><span class="line">	)</span><br><span class="line">#7、查询工资最高的员工的姓名</span><br><span class="line">#要求 frist_name 和 last_name 显示为一列，列名为 姓.名</span><br><span class="line">#①查询最高工资</span><br><span class="line">SELECT MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line"></span><br><span class="line">#②查询工资&#x3D;①的姓.名</span><br><span class="line">SELECT</span><br><span class="line">	CONCAT(last_name,&#39;.&#39;,first_name) AS 姓名</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	salary &#x3D; </span><br><span class="line">	(</span><br><span class="line">	SELECT MAX(salary)</span><br><span class="line">	FROM employees	</span><br><span class="line">	)</span><br></pre></td></tr></table></figure>



<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#进阶8：分页查询</span><br><span class="line">&#x2F;*</span><br><span class="line">应用场景：当要显示的数据，一页显示不全，需要分页提交sql请求</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">	select 查询列表</span><br><span class="line">	from 表</span><br><span class="line">	【join type join 表2</span><br><span class="line">	on 连接条件</span><br><span class="line">	where 筛选条件</span><br><span class="line">	group by 分组字段</span><br><span class="line">	having 分组后的筛选</span><br><span class="line">	order by 排序的字段</span><br><span class="line">	】</span><br><span class="line">	limit offset,size;</span><br><span class="line">	</span><br><span class="line">	offset要显示条目的起始索引（起始索引从0开始）</span><br><span class="line">	size 要显示的条目个数</span><br><span class="line">特点：</span><br><span class="line">	①limit 语句放在查询语句的最后</span><br><span class="line">	②公式</span><br><span class="line">		要显示的页数 page , 每页的条目数 size</span><br><span class="line">	select 查询列表</span><br><span class="line">	from 表</span><br><span class="line">	limit (page-1)*size，size；</span><br><span class="line">	</span><br><span class="line">	size &#x3D; 10</span><br><span class="line">	page </span><br><span class="line">	1	0</span><br><span class="line">	2	10</span><br><span class="line">	3	20</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">*&#x2F;</span><br><span class="line">#案例1：查询前五条员工信息</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">LIMIT</span><br><span class="line">	0,5</span><br><span class="line"></span><br><span class="line">#案例2：查询第11条-第25条</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">LIMIT</span><br><span class="line">	10,15</span><br><span class="line"></span><br><span class="line">#案例3：有奖金的员工信息，并且工资比较高的前10名显示出来</span><br><span class="line">SELECT</span><br><span class="line">	*</span><br><span class="line">FROM</span><br><span class="line">	employees</span><br><span class="line">WHERE</span><br><span class="line">	commission_pct IS NOT NULL</span><br><span class="line">ORDER BY </span><br><span class="line">	salary DESC</span><br><span class="line">LIMIT 0,10</span><br></pre></td></tr></table></figure>



<h4 id="union联合查询"><a href="#union联合查询" class="headerlink" title="union联合查询"></a>union联合查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#进阶9：联合查询</span><br><span class="line">&#x2F;*</span><br><span class="line">union 联合 合并：将多条查询语句的结果合并成一个结果</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">	查询语句1</span><br><span class="line">	union</span><br><span class="line">	查询语句2</span><br><span class="line">	····</span><br><span class="line">应用场景：</span><br><span class="line">要查询的结果来自多个表，且多个表没有直接的连接关系，但是查询的信息一致时</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1、要求多条查询语句的查询列数是一致的</span><br><span class="line">2、要求多条查询语句的查询的每一列的类型和顺序最好一致</span><br><span class="line">3、union关键字默认去重，如果使用union all 可以包含重复项</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#引入的案例：查询部门编号 &gt; 90 或 邮箱中包含a的员工信息</span><br><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line">WHERE</span><br><span class="line">	department_id &gt; 90</span><br><span class="line">	OR </span><br><span class="line">	email LIKE &#39;%a%&#39;</span><br><span class="line">#union	</span><br><span class="line">SELECT * FROM employees WHERE department_id &gt; 90</span><br><span class="line">UNION</span><br><span class="line">SELECT * FROM employees WHERE email LIKE &#39;%a%&#39;;</span><br></pre></td></tr></table></figure>



<h3 id="DML语言的学习"><a href="#DML语言的学习" class="headerlink" title="DML语言的学习"></a>DML语言的学习</h3><h4 id="插入语句"><a href="#插入语句" class="headerlink" title="插入语句"></a>插入语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">#DML语言</span><br><span class="line">&#x2F;*</span><br><span class="line">数据操作语言</span><br><span class="line">插入：insert</span><br><span class="line">修改：update</span><br><span class="line">删除：delete</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#一、插入语句</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">insert into 表名（列名，。。。） value(值1...)</span><br><span class="line"></span><br><span class="line">表名</span><br><span class="line">列名</span><br><span class="line">新值</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#1.插入的值的类型要与列的类型一致或兼容</span><br><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUES(13,&#39;唐艺昕&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2);</span><br><span class="line"></span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2、可以为null的列如何插入值？</span><br><span class="line">#不可以为null的列必须插入值</span><br><span class="line">#方式一：</span><br><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUES(13,&#39;唐艺昕&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUES(14,&#39;金星&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1398888888&#39;,NULL,9);</span><br><span class="line"></span><br><span class="line">#方式二：</span><br><span class="line">INSERT INTO beauty(id,NAME,sex,phone)</span><br><span class="line">VALUES(15,&#39;娜扎&#39;,&#39;女&#39;,&#39;1398888888&#39;);</span><br><span class="line"></span><br><span class="line">#3、列的顺序是否可以调换</span><br><span class="line">INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">VALUES(&#39;蒋欣&#39;,&#39;女&#39;,16,&#39;110&#39;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#4、列数和值的个数必须一致</span><br><span class="line">INSERT INTO beauty(NAME,sex,id,phone)</span><br><span class="line">VALUES(&#39;关晓彤&#39;,&#39;女&#39;,17,&#39;110&#39;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#5、可以省略列名，默认所有列，而且列的顺序和表中的列的顺序一致</span><br><span class="line">INSERT INTO beauty</span><br><span class="line">VALUES(18,&#39;张飞&#39;,&#39;男&#39;,NULL,&#39;119&#39;,NULL,NULL);</span><br><span class="line"></span><br><span class="line">#方式二：</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">insert into 表名</span><br><span class="line">set 列名 &#x3D; 值, 列名 &#x3D; 值, ....</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">INSERT INTO beauty</span><br><span class="line">SET id &#x3D; 19,NAME&#x3D;&#39;刘涛&#39;,phone&#x3D;&#39;999&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#两种方式大PK</span><br><span class="line">&#x2F;*</span><br><span class="line">1、方式一支持插入多行,方式二不支持</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">INSERT INTO beauty(id,NAME,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line">VALUES(23,&#39;唐艺昕1&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2),</span><br><span class="line">(24,&#39;唐艺昕2&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2),</span><br><span class="line">(25,&#39;唐艺昕3&#39;,&#39;女&#39;,&#39;1990-4-23&#39;,&#39;1898888888&#39;,NULL,2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2、方式一支持子查询，方式二不支持</span><br><span class="line">INSERT INTO beauty(id,NAME,phone)</span><br><span class="line">SELECT 26,&#39;宋茜&#39;,&#39;15345&#39;;</span><br></pre></td></tr></table></figure>



<h4 id="修改语句"><a href="#修改语句" class="headerlink" title="修改语句"></a>修改语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#------------修改语句---------</span><br><span class="line">&#x2F;*</span><br><span class="line">1、修改单表的记录 ⭐</span><br><span class="line">语法：</span><br><span class="line">update 表名</span><br><span class="line">set 列&#x3D;新值,列&#x3D;新值,...</span><br><span class="line">where 筛选条件；</span><br><span class="line"></span><br><span class="line">2、修改多表的记录【补充】</span><br><span class="line">语法：</span><br><span class="line">sql92语法：</span><br><span class="line">	update 表1 别名,表2 别名</span><br><span class="line">	set 列 &#x3D; 新值,...</span><br><span class="line">	where 连接条件</span><br><span class="line">	and 筛选条件;</span><br><span class="line">	</span><br><span class="line">sql99语法：</span><br><span class="line">	update 表1 别名</span><br><span class="line">	inner|left|right join 表2 别名</span><br><span class="line">	on 连接条件</span><br><span class="line">	set 列 &#x3D; 新值,...</span><br><span class="line">	where 筛选条件;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#1.修改单表的记录</span><br><span class="line">#案例1、修改beauty表中姓唐女神的电话为 123456</span><br><span class="line">UPDATE beauty SET phone &#x3D; &#39;123456&#39;</span><br><span class="line">WHERE NAME LIKE &#39;%唐%&#39;;</span><br><span class="line"></span><br><span class="line">#案例2、修改boys表id号为2的名称为张飞，魅力值10</span><br><span class="line">UPDATE boys SET boyname &#x3D; &#39;张飞&#39;,usercp &#x3D; 10</span><br><span class="line">WHERE id &#x3D; 2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.修改多表的记录</span><br><span class="line"></span><br><span class="line">#案例1：修改张无忌的女朋友的手机号为114</span><br><span class="line">UPDATE boys AS bo</span><br><span class="line">INNER JOIN beauty AS b ON bo.id &#x3D; b.&#96;boyfriend_id&#96;</span><br><span class="line">SET b.&#96;phone&#96; &#x3D; &#39;114&#39;</span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;张无忌&#39;;</span><br><span class="line"></span><br><span class="line">#案例2：修改没有男朋友的女神的男朋友编号 都为 2号</span><br><span class="line">UPDATE boys AS bo</span><br><span class="line">RIGHT JOIN beauty AS b ON bo.id &#x3D; b.&#96;boyfriend_id&#96;</span><br><span class="line">SET b.&#96;boyfriend_id&#96;  &#x3D; &#39;2&#39;</span><br><span class="line">WHERE b.&#96;id&#96; IS NULL;</span><br></pre></td></tr></table></figure>



<h4 id="删除语句"><a href="#删除语句" class="headerlink" title="删除语句"></a>删除语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">#-----------删除语句----------</span><br><span class="line">&#x2F;*</span><br><span class="line">方式一：delete</span><br><span class="line">语法:</span><br><span class="line">1、单表的删除【⭐】</span><br><span class="line">delete from 表名 where 筛选条件</span><br><span class="line"></span><br><span class="line">2、多表的删除【补充】</span><br><span class="line">sql92语法：</span><br><span class="line">selete 表1的别名，表2的别名</span><br><span class="line">from 表1 别名，表2 别名</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line">sql99语法：</span><br><span class="line">selete 表1的别名，表2的别名</span><br><span class="line">from 表1 别名</span><br><span class="line">inner|left|right join 表2 别名 on 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">方式二：truncate</span><br><span class="line"></span><br><span class="line">语法：truncate table 表名；</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#方式一：delete</span><br><span class="line">#1、单表的删除</span><br><span class="line">#案例1：删除手机号以9结尾的女神信息</span><br><span class="line">DELETE FROM beauty WHERE phone LIKE &#39;%9&#39;;</span><br><span class="line"></span><br><span class="line">#2、多表的删除</span><br><span class="line">#案例：删除张无忌的女朋友的信息</span><br><span class="line">DELETE b</span><br><span class="line">FROM beauty AS b</span><br><span class="line">INNER JOIN boys bo ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96;</span><br><span class="line">WHERE	bo.&#96;boyName&#96; &#x3D; &#39;张无忌&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#案例：删除黄晓明的信息以及他的女朋友的信息</span><br><span class="line">DELETE b,bo</span><br><span class="line">FROM beauty AS b</span><br><span class="line">INNER JOIN boys AS bo ON b.&#96;boyfriend_id&#96; &#x3D; bo.&#96;id&#96;</span><br><span class="line">WHERE bo.&#96;boyName&#96; &#x3D; &#39;黄晓明&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#方式二：truncate语句</span><br><span class="line">#清空</span><br><span class="line">#案例：将魅力值&gt;100的男神信息删除</span><br><span class="line">TRUNCATE TABLE boys;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#delete pk truncate</span><br><span class="line">&#x2F;*</span><br><span class="line">1.delete 可以加 where 条件，truncate 不能加</span><br><span class="line"></span><br><span class="line">2.truncate 删除，效率高一丢丢</span><br><span class="line">3.假设要删除的表中有自增长列,</span><br><span class="line">如果用delete删除后，再插入数据，自增长列的值从断点开始,</span><br><span class="line">而truncate删除后，再插入数据，自增长列的值从1开始。</span><br><span class="line">4.truncate删除没有返回值,delete删除有返回值</span><br><span class="line"></span><br><span class="line">5.truncate删除不能回滚，delete删除可以回滚.</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">SELECT * FROM boys;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DELETE FROM boys;</span><br><span class="line">INSERT INTO boys(boyname,userCP)</span><br><span class="line">VALUES(&#39;张飞&#39;,100),(&#39;刘备&#39;,100),(&#39;关云长&#39;,100);</span><br></pre></td></tr></table></figure>



<h3 id="DDL语言的学习"><a href="#DDL语言的学习" class="headerlink" title="DDL语言的学习"></a>DDL语言的学习</h3><h4 id="库和表的管理"><a href="#库和表的管理" class="headerlink" title="库和表的管理"></a>库和表的管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">#ddl语言</span><br><span class="line">&#x2F;*</span><br><span class="line">数据定义语言</span><br><span class="line"></span><br><span class="line">库和表的管理</span><br><span class="line"></span><br><span class="line">一、库的管理</span><br><span class="line">创建、修改、删除</span><br><span class="line">二、表的管理</span><br><span class="line">创建、修改、删除</span><br><span class="line"></span><br><span class="line">创建：create</span><br><span class="line">修改：alter</span><br><span class="line">删除: drop</span><br><span class="line">*&#x2F;</span><br><span class="line">#一、库的管理</span><br><span class="line">#1、库的创建</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">create database [if not exists]库名;</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#案例：创建库Books</span><br><span class="line">CREATE DATABASE IF NOT EXISTS books;</span><br><span class="line"></span><br><span class="line">#2、库的修改</span><br><span class="line">RENAME DATABASE books TO 新库名;  【已经弃用，会出现错误】</span><br><span class="line"></span><br><span class="line">#更改库的字符集</span><br><span class="line">ALTER DATABASE books CHARACTER SET gbk;</span><br><span class="line"></span><br><span class="line">#3、库的删除</span><br><span class="line">DROP DATABASE  IF EXISTS books;</span><br><span class="line"></span><br><span class="line">#二、表的管理</span><br><span class="line">#1.表的创建 ⭐</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">create table 表名(</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	列名 列的类型【(长度) 约束】,</span><br><span class="line">	...</span><br><span class="line">	列名 列的类型【(长度) 约束】</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#案例：创建表Book</span><br><span class="line">CREATE TABLE book(</span><br><span class="line">	id INT,#编号</span><br><span class="line">	bName VARCHAR(20),#图书名</span><br><span class="line">	price DOUBLE,#价格</span><br><span class="line">	authorId INT,#作者编号</span><br><span class="line">	publishDate DATETIME#出版日期</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC book;</span><br><span class="line"></span><br><span class="line">#案例：创建表author</span><br><span class="line">CREATE TABLE author(</span><br><span class="line">	id INT,</span><br><span class="line">	au_name VARCHAR(20),</span><br><span class="line">	nation VARCHAR(10)</span><br><span class="line">);</span><br><span class="line">DESC author;</span><br><span class="line"></span><br><span class="line">#2.表的修改</span><br><span class="line">&#x2F;*</span><br><span class="line">语法:</span><br><span class="line">	alter table 表名 add|drop|modify|change column 列名，列的类型【约束】;</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#①修改列名</span><br><span class="line">ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#②修改列的类型或约束</span><br><span class="line">ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</span><br><span class="line"></span><br><span class="line">#③添加新列</span><br><span class="line">ALTER TABLE author ADD COLUMN annual DOUBLE;</span><br><span class="line"></span><br><span class="line">#④删除列</span><br><span class="line">ALTER TABLE author DROP COLUMN annual;</span><br><span class="line"></span><br><span class="line">#⑤修改表名</span><br><span class="line">ALTER TABLE author RENAME TO book_author;</span><br><span class="line"></span><br><span class="line">#3.表的删除</span><br><span class="line">DROP TABLE IF EXISTS author;</span><br><span class="line"></span><br><span class="line">SHOW TABLES;#查看当前库的所有表</span><br><span class="line"></span><br><span class="line">#通用的写法：</span><br><span class="line">DROP DATABASE IF EXISTS 旧库名;</span><br><span class="line">CREATE DATABASE 新库名;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS 旧表名;</span><br><span class="line">CREATE TABLE 表名();</span><br><span class="line"></span><br><span class="line">#4.表的复制</span><br><span class="line">INSERT INTO author VALUES</span><br><span class="line">(1,&#39;村上春树&#39;,&#39;日本&#39;),</span><br><span class="line">(2,&#39;莫言&#39;,&#39;中国&#39;),</span><br><span class="line">(3,&#39;冯唐&#39;,&#39;中国&#39;),</span><br><span class="line">(4,&#39;金庸&#39;,&#39;中国&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM author;</span><br><span class="line">SELECT * FROM copy;</span><br><span class="line"></span><br><span class="line">#1.仅仅复制表的结构</span><br><span class="line">CREATE TABLE copy LIKE author;</span><br><span class="line"></span><br><span class="line">#2.复制表的结构加数据</span><br><span class="line">#SELECT * FROM copy2;</span><br><span class="line">CREATE TABLE copy2</span><br><span class="line">SELECT * FROM author;</span><br><span class="line"></span><br><span class="line">#只复制部分数据</span><br><span class="line">SELECT * FROM copy3;</span><br><span class="line"></span><br><span class="line">CREATE TABLE copy3</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author</span><br><span class="line">WHERE nation&#x3D;&#39;中国&#39;;</span><br><span class="line"></span><br><span class="line">#仅仅复制某些字段</span><br><span class="line">CREATE TABLE copy4</span><br><span class="line">SELECT id,au_name</span><br><span class="line">FROM author</span><br><span class="line">WHERE 0;</span><br></pre></td></tr></table></figure>

<h5 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#---------练习-------------</span><br><span class="line">#1.创建表dept1</span><br><span class="line">NAME NULL? TYPE</span><br><span class="line">id 	   INT(7)</span><br><span class="line">NAME       VARCHAR(25)</span><br><span class="line"></span><br><span class="line">CREATE DATABASE IF NOT EXISTS tests DEFAULT CHARACTER SET utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE dept1</span><br><span class="line">(</span><br><span class="line">	id INT(7),</span><br><span class="line">	NAME VARCHAR(25)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#2.将表departments中的数据插入新表dept2中</span><br><span class="line">CREATE TABLE IF NOT EXISTS dept2</span><br><span class="line">SELECT department_id,department_name</span><br><span class="line">FROM myemployees.departments</span><br><span class="line"></span><br><span class="line">#3.创建表emp5</span><br><span class="line">NAME 		NULL? 	TYPE</span><br><span class="line">id 			INT(7)</span><br><span class="line">First_name		VARCHAR(25)</span><br><span class="line">Last_name		VARCHAR(25)</span><br><span class="line">Dept_id			INT(7)</span><br><span class="line"></span><br><span class="line">CREATE TABLE emp5</span><br><span class="line">(</span><br><span class="line">	id INT(7),</span><br><span class="line">	First_name VARCHAR(25),</span><br><span class="line">	Last_name  VARCHAR(25),</span><br><span class="line">	Dept_id INT(7)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#4.将Last_name的长度增加到50</span><br><span class="line">ALTER TABLE emp5 MODIFY COLUMN Last_name VARCHAR(50);</span><br><span class="line"></span><br><span class="line">#5.根据表employees 创建employees2</span><br><span class="line">CREATE TABLE employees2</span><br><span class="line">SELECT * FROM myemployees.&#96;employees&#96;</span><br><span class="line"></span><br><span class="line">CREATE TABLE employees2 LIKE myemployees.&#96;employees&#96;</span><br><span class="line"></span><br><span class="line">#6.删除表emp5</span><br><span class="line">DROP TABLE IF EXISTS emp5;</span><br><span class="line"></span><br><span class="line">#7.将表employees2重命名为emp5;</span><br><span class="line">ALTER TABLE employees2 RENAME TO emp5;</span><br><span class="line"></span><br><span class="line">#8.在表dept和emp5中添加新列test_column,并检查所作的操作</span><br><span class="line">ALTER TABLE emp5 ADD COLUMN test_column INT;</span><br><span class="line"></span><br><span class="line">#9.删除表emp5中的列 dept_id</span><br><span class="line">ALTER TABLE emp5 DROP COLUMN dept_id;</span><br></pre></td></tr></table></figure>



<h4 id="常见数据类型介绍"><a href="#常见数据类型介绍" class="headerlink" title="常见数据类型介绍"></a>常见数据类型介绍</h4><img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/202004201587375934(1).jpg/Hao"/>

<img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/202004201587376791(1).jpg/Hao"/>

<img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/202004201587377862(1).jpg/Hao"/>



<img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/152020042087380720(1).jpg/Hao"/>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line">#---------------------常见的数据类型---------------------</span><br><span class="line">#常见的数据类型</span><br><span class="line">&#x2F;*</span><br><span class="line">数值型：</span><br><span class="line">	整型</span><br><span class="line">	小数：</span><br><span class="line">		定点数</span><br><span class="line">		浮点数</span><br><span class="line">字符型：</span><br><span class="line">	较短的文本：char 、 varchar</span><br><span class="line">	较长的文本：text 、 blob（较长的二进制数据）</span><br><span class="line">日期型：</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#一、整型</span><br><span class="line">&#x2F;*</span><br><span class="line">分类：</span><br><span class="line">tinnyint,smallint,mdeiumint,int&#x2F;integer,bigint</span><br><span class="line">1	  2		3 	4 	  8</span><br><span class="line">特点：</span><br><span class="line">①如果不设置无符号还是有符号，默认是有符号，如果想设置无符号 </span><br><span class="line">需要添加 unsigned</span><br><span class="line">②如果插入的数值超出了整型的范围，会报out of range 异常，并且插入临界值</span><br><span class="line">③如果不设置长度，会有默认的长度</span><br><span class="line"></span><br><span class="line">长度代表了显示的最大长度，如果不够会用0在左边填充，但是必须搭配zerofill使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#1.如何设置无符号和有符号</span><br><span class="line">CREATE TABLE tab_int1</span><br><span class="line">(</span><br><span class="line">	t1 INT(7) ZEROFILL,  #(7)表示显示的长度  不是数据的范围  zerofill表示添加0显示</span><br><span class="line">	t2 INT(7) UNSIGNED</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#二、小数</span><br><span class="line">&#x2F;*</span><br><span class="line">分类：</span><br><span class="line">	1.浮点型</span><br><span class="line">	float(M,D)</span><br><span class="line">	double(M,D)</span><br><span class="line">	2.定点型</span><br><span class="line">	dec(M,D)</span><br><span class="line">	decimal(M,D)</span><br><span class="line">特点：</span><br><span class="line">①M和D；</span><br><span class="line">M: 整数部位 + 小数部位</span><br><span class="line">D：小数部位</span><br><span class="line">如果超过范围，则插入临界值</span><br><span class="line"></span><br><span class="line">②</span><br><span class="line">M 和 D都可以省略</span><br><span class="line">如果是decimal 则 M 默认是10 ，D 默认是0</span><br><span class="line">如果是float 和 double ， 则会根据插入的数值精度来决定精度</span><br><span class="line"></span><br><span class="line">③定点型的精确度较高，如果要求插入数值的精度较高如货币运算等则考虑</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#测试M和D</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_float(</span><br><span class="line">	f1 FLOAT(5,2),</span><br><span class="line">	f2 DOUBLE(5,2),</span><br><span class="line">	f3 DECIMAL(5,2)</span><br><span class="line">);</span><br><span class="line">SELECT * FROM tab_float;</span><br><span class="line">INSERT INTO tab_float VALUE(123.45,123.45,123.45);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_float VALUE(123.456,123.456,123.456);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_float VALUE(123.4,123.4,123.4);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_float VALUE(1023.4,1023.4,1023.4);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#原则：</span><br><span class="line">&#x2F;*</span><br><span class="line">所选择的类型越简单越好，能保存数值的类型越小越好</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#三、字符型</span><br><span class="line">&#x2F;*</span><br><span class="line">较短的文本</span><br><span class="line">	char </span><br><span class="line">	varchar</span><br><span class="line">其他：</span><br><span class="line">binary 和 varbinary 用于保存较短的二进制</span><br><span class="line">enum 用于保存枚举</span><br><span class="line">set用于保存集合	</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">较长的文本</span><br><span class="line">	text</span><br><span class="line">	blob（较大的二进制）</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">	写法	    M的意思	    特点	      空间的耗费	效率</span><br><span class="line">char	char(M)	    最大的字符数    固定长度的字符    比较耗费		高</span><br><span class="line">		    可省略，默认为1</span><br><span class="line">varchar varchar(M)  最大的字符数    可变长度的字符    比较节省		低</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_char(</span><br><span class="line">	c1 ENUM(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_char;</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_char VALUE(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_char VALUE(&#39;b&#39;);</span><br><span class="line">INSERT INTO tab_char VALUE(&#39;c&#39;);</span><br><span class="line">INSERT INTO tab_char VALUE(&#39;m&#39;);</span><br><span class="line">INSERT INTO tab_char VALUE(&#39;A&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_set;</span><br><span class="line">CREATE TABLE tab_set(</span><br><span class="line">	s1 SET(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;)</span><br><span class="line">);</span><br><span class="line">INSERT INTO tab_set VALUE(&#39;a&#39;);</span><br><span class="line">INSERT INTO tab_set VALUE(&#39;a,b&#39;);</span><br><span class="line">INSERT INTO tab_set VALUE(&#39;a,c,d&#39;);</span><br><span class="line"></span><br><span class="line">#日期类型</span><br><span class="line">&#x2F;*</span><br><span class="line">分类：</span><br><span class="line">	date 只保存日期</span><br><span class="line">	time 只保存时间</span><br><span class="line">	year 只保存年</span><br><span class="line">	</span><br><span class="line">	datetime 保存日期 + 时间</span><br><span class="line">	timesstamp 保存日期 + 时间</span><br><span class="line">特点：</span><br><span class="line">		字节	范围 		时区等的影响</span><br><span class="line">datetime	8	1000-9999	不受</span><br><span class="line">timestamp	4 	1970-2038</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_date(</span><br><span class="line">	t1 DATETIME,</span><br><span class="line">	t2 TIMESTAMP</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO tab_date VALUES(NOW(),NOW());</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_date;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;time_zone&#39;;</span><br><span class="line"></span><br><span class="line">SET time_zone&#x3D;&#39;+9:00&#39;;</span><br></pre></td></tr></table></figure>



<h4 id="常见约束"><a href="#常见约束" class="headerlink" title="常见约束"></a>常见约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">#-----------------常见约束-----------------</span><br><span class="line"></span><br><span class="line">#常见约束</span><br><span class="line">&#x2F;*</span><br><span class="line">含义：一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</span><br><span class="line"></span><br><span class="line">分类：六大约束</span><br><span class="line">	NOT NULL：非空，用于保证该字段的值不能为空</span><br><span class="line">	比如 姓名，学号等</span><br><span class="line">	</span><br><span class="line">	DEFAULT：默认，用于保证该字段有默认值</span><br><span class="line">	比如 性别</span><br><span class="line">	</span><br><span class="line">	PRIMARY KEY:主键，用于保证该字段的值具有唯一性，并且非空</span><br><span class="line">	比如 学号，员工编号等</span><br><span class="line">	</span><br><span class="line">	UNIQUE：唯一，用于保证该字段的值具有唯一性，可以为空</span><br><span class="line">	比如 座位号</span><br><span class="line">	</span><br><span class="line">	CHECK：检查约束【mysql中不支持】</span><br><span class="line">	比如 年龄、性别</span><br><span class="line">	</span><br><span class="line">	FOREIGN KEY:外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值</span><br><span class="line">		在从表添加外键约束，用于引用主表中某列的值</span><br><span class="line">	比如 学生表的专业编号，员工表的部门编号，员工表的工种编号</span><br><span class="line">	</span><br><span class="line">添加约束的时机：</span><br><span class="line">	1.创建表时</span><br><span class="line">	2.修改表时</span><br><span class="line">	</span><br><span class="line">约束的添加分类：</span><br><span class="line">	列级约束：六大约束语法上都支持，但是外键约束没有效果</span><br><span class="line">	表级约束：除了非空、默认，其他都支持</span><br><span class="line"></span><br><span class="line">主键和唯一的大对比：</span><br><span class="line">		保证唯一性	是否允许为空	一个表中可以有多个	是否允许组合</span><br><span class="line">	主键 	√		×		至多有一个		√，但是不推荐</span><br><span class="line">	唯一	√		√		可以有多个		√，但是不推荐</span><br><span class="line">	</span><br><span class="line">	insert into major values(1,&#39;java&#39;);</span><br><span class="line">	insert into major values(2,&#39;h5&#39;);</span><br><span class="line">	insert into stuinfo values(1,&#39;john&#39;,&#39;男&#39;,null,19,1);</span><br><span class="line">	insert into stuinfo values(2,&#39;lily&#39;,&#39;男&#39;,null,19,2);</span><br><span class="line"></span><br><span class="line">外键：</span><br><span class="line">	1.要求在从表设置外键关系</span><br><span class="line">	2.从表的外键列的类型 和 主表的关联列的类型要求一致或兼容</span><br><span class="line">	3.主表的关联列必须是一个key（一般是主键或唯一）</span><br><span class="line">	4.插入数据时，先插入主表，在插入从表</span><br><span class="line">	5.删除数据时，先删除从表，再删除主表</span><br><span class="line">*&#x2F;</span><br><span class="line">CREATE TABLE 表名(</span><br><span class="line">	字段名 字段类型 列级约束,</span><br><span class="line">	字段名 字段类型 列级约束,</span><br><span class="line">	表级约束</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#一、创建表时添加约束</span><br><span class="line">#1.添加列级约束</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">	直接在字段名和类型后面追加约束 即可</span><br><span class="line">	只支持默认、非空、主键、唯一</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CREATE DATABASE students DEFAULT CHARACTER SET utf8;</span><br><span class="line"></span><br><span class="line">USE students;</span><br><span class="line"></span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT PRIMARY KEY, #主键</span><br><span class="line">	stuName VARCHAR(20) NOT NULL, #非空</span><br><span class="line">	gender CHAR(1) CHECK(gender&#x3D;&#39;男&#39; OR gender&#x3D;&#39;女&#39;), #检查</span><br><span class="line">	seat INT UNIQUE, #唯一</span><br><span class="line">	age INT DEFAULT 18 #默认约束</span><br><span class="line">	#majorid int key references major(id)#外键</span><br><span class="line">)</span><br><span class="line">SELECT * FROM stuinfo;</span><br><span class="line"></span><br><span class="line">CREATE TABLE major(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	majorName VARCHAR(20)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">DESC stuinfo;</span><br><span class="line">#查看stuinfo表中所有的主键，外键，唯一</span><br><span class="line">SHOW INDEX FROM stuinfo;</span><br><span class="line"></span><br><span class="line">#2、添加表级约束</span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">	在各个字段的最下面</span><br><span class="line">【constraint 约束名】 约束类型（字段名）</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo1(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT,</span><br><span class="line">	</span><br><span class="line">	CONSTRAINT pk PRIMARY KEY(id),#主键</span><br><span class="line">	CONSTRAINT uq UNIQUE(seat), #唯一键</span><br><span class="line">	CONSTRAINT ck CHECK(gender&#x3D;&#39;男&#39; OR gender&#x3D;&#39;女&#39;),#检查</span><br><span class="line">	CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id)#外键</span><br><span class="line">)</span><br><span class="line">SHOW INDEX FROM stuinfo1;</span><br><span class="line"></span><br><span class="line">#通用的写法：</span><br><span class="line">CREATE TABLE IF NOT EXISTS stuinfo3(</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	stuname VARCHAR(20) NOT NULL,</span><br><span class="line">	sex CHAR(1),</span><br><span class="line">	age INT DEFAULT 18,</span><br><span class="line">	seat INT UNIQUE,</span><br><span class="line">	majorid INT</span><br><span class="line">	#constraint fk_stuinfo_major foreign key(majorid) references major(id)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#二、修改表时添加约束</span><br><span class="line">&#x2F;*</span><br><span class="line">1.添加列级约束</span><br><span class="line">alter table 表名 modify column 字段名 字段类型 新约束；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.添加表级约束</span><br><span class="line">alter table 表名 add [constraint 约束名] 约束类型（字段名） 【外键的引用】</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS stuinfo;</span><br><span class="line">CREATE TABLE stuinfo(</span><br><span class="line">	id INT,</span><br><span class="line">	stuname VARCHAR(20),</span><br><span class="line">	gender CHAR(1),</span><br><span class="line">	seat INT,</span><br><span class="line">	age INT,</span><br><span class="line">	majorid INT</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">DESC stuinfo;</span><br><span class="line">#1.添加非空约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NOT NULL</span><br><span class="line"></span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL</span><br><span class="line">#添加默认约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT DEFAULT 18;</span><br><span class="line"></span><br><span class="line">#3.添加主键</span><br><span class="line">#添加列级约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN id INT PRIMARY KEY;</span><br><span class="line">#添加表级约束</span><br><span class="line">ALTER TABLE stuinfo ADD PRIMARY KEY(id);</span><br><span class="line"></span><br><span class="line">#4.添加唯一</span><br><span class="line">#添加列级约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN seat INT UNIQUE;</span><br><span class="line">#添加表级约束</span><br><span class="line">ALTER TABLE stuinfo ADD UNIQUE(seat);</span><br><span class="line"></span><br><span class="line">#5.添加外键</span><br><span class="line">ALTER TABLE stuinfo ADD CONSTRAINT fk_stuinfo_major FOREIGN KEY(majorid) REFERENCES major(id);</span><br><span class="line"></span><br><span class="line">#三、修改表时删除约束</span><br><span class="line">#1.删除非空约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN stuname VARCHAR(20) NULL;</span><br><span class="line"></span><br><span class="line">#2.删除默认约束</span><br><span class="line">ALTER TABLE stuinfo MODIFY COLUMN age INT;</span><br><span class="line"></span><br><span class="line">#3.删除主键</span><br><span class="line">ALTER TABLE stuinfo DROP PRIMARY KEY;</span><br><span class="line"></span><br><span class="line">#4.删除唯一</span><br><span class="line">ALTER TABLE stuinfo DROP INDEX seat;</span><br><span class="line"></span><br><span class="line">#5.删除外键</span><br><span class="line">ALTER TABLE stuinfo DROP FOREIGN KEY fk_stuinfo_major;</span><br><span class="line"></span><br><span class="line">SHOW INDEX stuinfo;</span><br></pre></td></tr></table></figure>

<h4 id="标识列"><a href="#标识列" class="headerlink" title="标识列"></a>标识列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#标识列</span><br><span class="line">&#x2F;**</span><br><span class="line">又称为自增长列</span><br><span class="line">含义：可以不用手动的插入值，系统提供默认的序列值</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.标识列必须和主键搭配么？</span><br><span class="line">	不一定，但是要求是一个key</span><br><span class="line">2.一个表中可以有几个标识列？</span><br><span class="line">	至多只有一个</span><br><span class="line">3.标识列的类型</span><br><span class="line">	只能是数据型</span><br><span class="line"></span><br><span class="line">4.标识列可以通过  SET auto_increment_increment &#x3D; 1; 设置步长</span><br><span class="line">也可以通过 手动插入值，设置起始值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#一、创建表时设置标识列</span><br><span class="line">DROP TABLE IF EXISTS tab_identity;</span><br><span class="line">CREATE TABLE tab_identity(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,#主键</span><br><span class="line">	NAME VARCHAR(20)</span><br><span class="line">);</span><br><span class="line">TRUNCATE TABLE tab_identity;</span><br><span class="line">INSERT INTO tab_identity VALUE(NULL,&#39;john&#39;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM tab_identity;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;%auto_increment%&#39;;</span><br><span class="line"></span><br><span class="line">SET auto_increment_increment &#x3D; 1;</span><br><span class="line"></span><br><span class="line">#二、修改表时设置标识列</span><br><span class="line">ALTER TABLE tab_identity MODIFY COLUMN id INT PRIMARY KEY AUTO_INCREMENT;</span><br><span class="line"></span><br><span class="line">#三、修改表示删除标识列</span><br><span class="line">ALTER TABLE tab_identity MODIFY COLUMN id INT;</span><br></pre></td></tr></table></figure>



<h3 id="TCL语言的学习"><a href="#TCL语言的学习" class="headerlink" title="TCL语言的学习"></a>TCL语言的学习</h3><h4 id="事务和事务处理"><a href="#事务和事务处理" class="headerlink" title="事务和事务处理"></a>事务和事务处理</h4><img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1587401268(1).jpg/Hao"/>

<img src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/1587401289(1).jpg/Hao"/>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">#TCL语言</span><br><span class="line">&#x2F;*</span><br><span class="line">Transaction Control Language 事务控制语言</span><br><span class="line"></span><br><span class="line">事务：</span><br><span class="line">一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行</span><br><span class="line"></span><br><span class="line">案例：转账</span><br><span class="line">张三丰  1000</span><br><span class="line">郭襄	1000</span><br><span class="line"></span><br><span class="line">update 表 set 张三丰的余额&#x3D;500 where name &#x3D; &#39;张三丰&#39;</span><br><span class="line">update 表 set 郭襄的余额&#x3D;1500  where name&#x3D;&#39;郭襄&#39;</span><br><span class="line"></span><br><span class="line">事物的ACID（acid）属性</span><br><span class="line">1.原子性（Atomicity）</span><br><span class="line">	原子性是指事务是一个不可分割的工作单位，</span><br><span class="line">	事务中的操作要么都发生，要么都不发生</span><br><span class="line">2.一致性（Consistency）</span><br><span class="line">	事务必须使数据库从一个一致性状态变换到另一个一致性状态</span><br><span class="line"></span><br><span class="line">3.隔离性（Isolation）</span><br><span class="line">	事务的隔离性是指一个事务的执行不能被其他事务干扰，</span><br><span class="line">	即一个事务内部的操作及使用的数据对并发的其他事务是隔离的</span><br><span class="line">	并发执行的各个事务之间不能互相干扰</span><br><span class="line">4.持久性（durability）</span><br><span class="line">持久性是指一个事务一单被提交，它对数据库中数据的改变就是永久性的</span><br><span class="line">接下来的其他操作和数据库姑丈不应该对其有任何影响</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">#-----------存储引擎------------</span><br><span class="line">存储引擎</span><br><span class="line">概念：在mysql中的数据用各种不同的技术存储在文件（或者）内存中</span><br><span class="line"></span><br><span class="line">SHOW ENGINES;#查看mysql支持的存储引擎</span><br><span class="line"></span><br><span class="line">在mysql中用的最多的存储引擎有：innodb,MYISAM,memory等</span><br><span class="line">其中innodb支持事务，而myisam,memory等不支持事务</span><br><span class="line"></span><br><span class="line">#事务的创建</span><br><span class="line">	隐式事务：事务没有明显的开启和结束的标记</span><br><span class="line">	比如：insert、update、delete语句</span><br><span class="line">		</span><br><span class="line">	</span><br><span class="line">	显示事务：事务具备明显的开启和结束的标志</span><br><span class="line">	前提：必须先设置自动提交功能为禁用</span><br><span class="line">	</span><br><span class="line">	SET autocommit &#x3D; 0;</span><br><span class="line">	</span><br><span class="line">步骤1：开启事务</span><br><span class="line">SET autocommit &#x3D; 0;</span><br><span class="line">START TRANSACTION;#可选</span><br><span class="line">步骤2:编写事务中的sql语句（select INSERT upade delete）</span><br><span class="line">语句1;</span><br><span class="line">语句2;</span><br><span class="line">.....</span><br><span class="line"></span><br><span class="line">步骤3：结束事务</span><br><span class="line">COMMIT;提交事务</span><br><span class="line">ROLLBACK;回滚事务</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#演示事务的使用步骤</span><br><span class="line">DROP TABLE IF EXISTS account;</span><br><span class="line">CREATE TABLE account(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	username VARCHAR(20),</span><br><span class="line">	balance DOUBLE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO account(username,balance)</span><br><span class="line">VALUES(&#39;张无忌&#39;,1000),(&#39;赵敏&#39;,1000)</span><br><span class="line">#演示事务的使用步骤</span><br><span class="line">#开启事务</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">#编写一组事务的语句</span><br><span class="line">UPDATE account SET balance&#x3D;500 WHERE username&#x3D;&quot;张无忌&quot;;</span><br><span class="line">UPDATE account SET balance&#x3D;1500 WHERE username&#x3D;&quot;赵敏&quot;;</span><br><span class="line">#结束事务</span><br><span class="line">COMMIT;</span><br><span class="line">SELECT * FROM account;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#开启事务</span><br><span class="line">SET autocommit&#x3D;0;</span><br><span class="line">START TRANSACTION;</span><br><span class="line">#编写一组事务的语句</span><br><span class="line">UPDATE account SET balance&#x3D;10000 WHERE username&#x3D;&quot;张无忌&quot;;</span><br><span class="line">UPDATE account SET balance&#x3D;1500 WHERE username&#x3D;&quot;赵敏&quot;;</span><br><span class="line">#结束事务</span><br><span class="line">ROLLBACK;</span><br><span class="line">SELECT * FROM account;</span><br></pre></td></tr></table></figure>



<h3 id="视图讲解"><a href="#视图讲解" class="headerlink" title="视图讲解"></a>视图讲解</h3><h3 id="存储过程和函数"><a href="#存储过程和函数" class="headerlink" title="存储过程和函数"></a>存储过程和函数</h3><h1 id="采坑错误总结"><a href="#采坑错误总结" class="headerlink" title="采坑错误总结"></a>采坑错误总结</h1><p>Mysql报错：You must reset your password using ALTER USER statement before executin</p>
<p>解决办法<br>1、 修改用户密码<br>mysql&gt; alter user ‘root’@’localhost’ identified by ‘youpassword’;  </p>
<p>或者    </p>
<p>mysql&gt; set password=password(“youpassword”);</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/WeChat Pay.jpg" alt="Hao_Perfect 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://haoperfect.oss-cn-beijing.aliyuncs.com/Myblog/Alipay.jpg" alt="Hao_Perfect 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Hao_Perfect
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://hao-perfect.github.io/2020/04/12/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" title="MySQL学习记录">http://hao-perfect.github.io/2020/04/12/MySQL%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    
    
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MySql/" rel="tag"># MySql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/06/uni-app%E5%AD%A6%E4%B9%A0/" rel="next" title="uni-app学习">
                <i class="fa fa-chevron-left"></i> uni-app学习
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/Photo.jpg"
                alt="Hao_Perfect" />
            
              <p class="site-author-name" itemprop="name">Hao_Perfect</p>
              <p class="site-description motion-element" itemprop="description">记录美好的学习生活</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Hao-Perfect" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=86 src="//music.163.com/outchain/player?type=2&id=167870&auto=1&height=66"></iframe>


          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#学习记录"><span class="nav-number">2.</span> <span class="nav-text">学习记录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL的常见命令"><span class="nav-number">2.0.1.</span> <span class="nav-text">MySQL的常见命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL的语法规范"><span class="nav-number">2.0.2.</span> <span class="nav-text">MySQL的语法规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DQL语言的学习"><span class="nav-number">2.0.3.</span> <span class="nav-text">DQL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基础查询"><span class="nav-number">2.0.3.1.</span> <span class="nav-text">基础查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件查询"><span class="nav-number">2.0.3.2.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#复习"><span class="nav-number">2.0.3.3.</span> <span class="nav-text">复习</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#排序查询"><span class="nav-number">2.0.3.4.</span> <span class="nav-text">排序查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见函数"><span class="nav-number">2.0.3.5.</span> <span class="nav-text">常见函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#字符函数"><span class="nav-number">2.0.3.5.1.</span> <span class="nav-text">字符函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#数学函数"><span class="nav-number">2.0.3.5.2.</span> <span class="nav-text">数学函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#日期函数"><span class="nav-number">2.0.3.5.3.</span> <span class="nav-text">日期函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#其他函数"><span class="nav-number">2.0.3.5.4.</span> <span class="nav-text">其他函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#流程控制函数"><span class="nav-number">2.0.3.5.5.</span> <span class="nav-text">流程控制函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#小结"><span class="nav-number">2.0.3.5.6.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组函数"><span class="nav-number">2.0.3.6.</span> <span class="nav-text">分组函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组查询"><span class="nav-number">2.0.3.7.</span> <span class="nav-text">分组查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接查询"><span class="nav-number">2.0.3.8.</span> <span class="nav-text">连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SQL92标准-等值连接"><span class="nav-number">2.0.3.8.1.</span> <span class="nav-text">SQL92标准-等值连接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SQL92标准-非等值连接"><span class="nav-number">2.0.3.8.2.</span> <span class="nav-text">SQL92标准-非等值连接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SQL92标准-自连接"><span class="nav-number">2.0.3.8.3.</span> <span class="nav-text">SQL92标准-自连接</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子查询"><span class="nav-number">2.0.3.9.</span> <span class="nav-text">子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分页查询"><span class="nav-number">2.0.3.10.</span> <span class="nav-text">分页查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#union联合查询"><span class="nav-number">2.0.3.11.</span> <span class="nav-text">union联合查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DML语言的学习"><span class="nav-number">2.0.4.</span> <span class="nav-text">DML语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#插入语句"><span class="nav-number">2.0.4.1.</span> <span class="nav-text">插入语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改语句"><span class="nav-number">2.0.4.2.</span> <span class="nav-text">修改语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除语句"><span class="nav-number">2.0.4.3.</span> <span class="nav-text">删除语句</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DDL语言的学习"><span class="nav-number">2.0.5.</span> <span class="nav-text">DDL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#库和表的管理"><span class="nav-number">2.0.5.1.</span> <span class="nav-text">库和表的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#练习"><span class="nav-number">2.0.5.1.1.</span> <span class="nav-text">练习</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见数据类型介绍"><span class="nav-number">2.0.5.2.</span> <span class="nav-text">常见数据类型介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见约束"><span class="nav-number">2.0.5.3.</span> <span class="nav-text">常见约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#标识列"><span class="nav-number">2.0.5.4.</span> <span class="nav-text">标识列</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCL语言的学习"><span class="nav-number">2.0.6.</span> <span class="nav-text">TCL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#事务和事务处理"><span class="nav-number">2.0.6.1.</span> <span class="nav-text">事务和事务处理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图讲解"><span class="nav-number">2.0.7.</span> <span class="nav-text">视图讲解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储过程和函数"><span class="nav-number">2.0.8.</span> <span class="nav-text">存储过程和函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#采坑错误总结"><span class="nav-number">3.</span> <span class="nav-text">采坑错误总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        ﻿<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fas fa-heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hao_Perfect</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">33.4k</span>
  
<br><a href="http://www.miitbeian.gov.cn/" target="_blank" rel="noopener">粤ICP备20002606号</a></br>

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>


  <!--<div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>
-->



        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  
  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("RimRr5VG6bq6spNYoGiIk77m-gzGzoHsz", "HPIwi7XkIgeMsqC2XgeGcMbo");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body>
</html>

